# AI Stack 环境配置示例
# 复制此文件为 .env 并填入您的配置
#
# 重要：Python 版本要求
# - 推荐使用 Python 3.12.x（PyTorch 官方支持）
# - Python 3.13 暂不支持 PyTorch，会导致 sentence-transformers 无法安装
# - 创建虚拟环境：python3.12 -m venv .venv
# - 激活虚拟环境：source .venv/bin/activate
# - 安装依赖：pip install torch && pip install -r requirements.txt

# ---- LLM / 向量引擎 ----
# 配置大语言模型和向量嵌入服务
# OpenAI API 配置（如使用 OpenAI）
OPENAI_API_KEY=sk-your-openai-api-key-here  # OpenAI API 密钥，从 https://platform.openai.com/api-keys 获取
OPENAI_BASE_URL=https://api.openai.com/v1  # OpenAI API 基础 URL，默认即可，或使用代理地址
# Azure OpenAI 配置（如使用 Azure）
AZURE_OPENAI_ENDPOINT=  # Azure OpenAI 端点，格式：https://your-resource.openai.azure.com
AZURE_OPENAI_DEPLOYMENT=  # Azure OpenAI 部署名称
# LLM 提供商选择
LLM_PROVIDER=ollama        # 支持：ollama/openai/azure，选择使用的大模型提供商
# Ollama 本地模型配置（如使用 Ollama）
OLLAMA_BASE_URL=http://localhost:11434  # Ollama 服务地址，默认本地 11434 端口
OLLAMA_MODEL=qwen2.5:7b  # Ollama 模型名称，如 qwen2.5:7b、llama2:7b 等
DEFAULT_LLM_MODEL=gpt-4o-mini  # 默认使用的 LLM 模型名称
USE_OLLAMA=false  # 是否启用 Ollama，设为 true 则使用本地 Ollama 服务
# 向量嵌入配置
EMBEDDING_BACKEND=sentence-transformers   # 嵌入后端：sentence-transformers（本地）/ hf（HuggingFace）/ ollama
EMBEDDING_MODEL_NAME=all-MiniLM-L6-v2  # 嵌入模型名称，常用：all-MiniLM-L6-v2、all-mpnet-base-v2
LOCAL_ST_MODEL_PATH=  # 本地 sentence-transformers 模型路径（可选，留空则自动下载）
EMBEDDING_ALLOW_DOWNLOAD=true  # 是否允许自动下载模型，设为 false 则必须手动下载
HF_HUB_OFFLINE=0  # HuggingFace Hub 离线模式：0=在线，1=离线
ST_MODEL_PATH=models/all-MiniLM-L6-v2  # sentence-transformers 模型存储路径

# ---- 服务基础配置 ----
# Web 服务监听配置
HOST=0.0.0.0  # 服务监听地址，0.0.0.0 表示监听所有网络接口
PORT=8000  # 服务监听端口，可根据需要修改
# 运行环境配置
ENVIRONMENT=development  # 运行环境：development（开发）/ production（生产）/ testing（测试）
DEBUG=true  # 是否启用调试模式，生产环境应设为 false
LOG_LEVEL=INFO  # 日志级别：DEBUG / INFO / WARNING / ERROR / CRITICAL
# 数据库配置
DATABASE_URL=sqlite:///./data/main.db  # 数据库连接 URL，SQLite 格式：sqlite:///./path/to/db.db
DB_PATH=data/aistack.db  # SQLite 数据库文件路径（备用配置）
ERP_EXPORT_DIR=  # ERP 数据导出目录路径（可选）

# ---- 安全与认证 ----
# JWT 令牌配置
JWT_SECRET_KEY=your-super-secret-jwt-key  # JWT 签名密钥，生产环境必须使用强随机字符串（系统启动时会提示设置）
JWT_ALGORITHM=HS256  # JWT 算法，默认 HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60  # 访问令牌过期时间（分钟），默认 60 分钟
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30  # 刷新令牌过期时间（天），默认 30 天
# API Key 配置
API_KEY_SALT=your-api-key-salt  # API 密钥加盐值，用于 API 密钥哈希
API_KEY_PREFIX=ak_  # API Key 前缀，默认 ak_
API_KEY_DEFAULT_EXPIRES_DAYS=90  # API Key 默认过期时间（天），默认 90 天
API_KEY_DEFAULT_SCOPE=read  # API Key 初始权限范围，默认只读（read），可选：read/write/admin/full
API_KEY_USE_DATABASE=true  # 是否使用数据库存储 API Key，默认 true（使用 SQLite）
# API 令牌配置
API_TOKEN=  # 通用 API 访问令牌（可选）
SUPER_AGENT_API_TOKEN=  # Super Agent API 专用令牌（可选）
# Token 撤销配置
TOKEN_REVOCATION_ENABLED=true  # 是否启用 Token 撤销功能，默认 true
# 安全审计配置
SECURITY_LOG_DIR=logs  # 安全日志目录
SECURITY_AUDIT_LOG=logs/security_audit.log  # 安全审计日志文件路径
SENSITIVE_KEYWORDS=password,secret,token,key,credential,敏感,机密,泄漏  # 敏感关键词列表（逗号分隔），用于日志脱敏
TERMINAL_WHITELIST_PATH=  # 终端命令白名单文件路径（可选，用于限制可执行命令）
# 日志记录配置
AUDIT_LOGGING_ENABLED=true  # 是否启用审计日志记录，默认 true
LOG_API_KEY_ACTIONS=true  # 是否记录 API Key 操作，默认 true
LOG_TOKEN_ACTIONS=true  # 是否记录 Token 操作，默认 true
LOG_COMMAND_ACTIONS=true  # 是否记录命令执行操作，默认 true

# ---- RAG / API 集成 ----
# RAG（检索增强生成）服务配置
RAG_API_URL=http://127.0.0.1:8001  # RAG 服务 API 地址
RAG_API_KEY=  # RAG 服务 API 密钥（如需要认证）
# 新闻 API 配置
NEWS_API_KEY=  # 新闻 API 密钥（可选，用于新闻数据获取）

# ---- 内容平台（示例：抖音/小红书） ----
# 配置各内容平台的 API 凭证，用于内容抓取、发布等功能
# 注意：这些凭证需要从对应平台的开放平台申请获取

# 抖音 API 配置
# 申请地址：https://open.douyin.com/
DOUYIN_APP_ID=your_douyin_app_id  # 抖音应用 ID
DOUYIN_APP_SECRET=your_douyin_app_secret  # 抖音应用密钥
DOUYIN_CLIENT_KEY=your_douyin_client_key  # 抖音客户端 Key
DOUYIN_CLIENT_SECRET=your_douyin_client_secret  # 抖音客户端密钥
DOUYIN_ACCESS_TOKEN=your_douyin_access_token  # 抖音访问令牌（通过 OAuth 获取）
DOUYIN_BASE_URL=https://open.douyin.com  # 抖音开放平台 API 基础 URL

# 小红书 API 配置
# 申请地址：https://developers.xiaohongshu.com/
XIAOHONGSHU_APP_ID=your_xiaohongshu_app_id  # 小红书应用 ID
XIAOHONGSHU_APP_SECRET=your_xiaohongshu_app_secret  # 小红书应用密钥
XIAOHONGSHU_ACCESS_TOKEN=your_xiaohongshu_access_token  # 小红书访问令牌

# 通用内容平台（自定义）
# 用于接入其他内容平台或自定义内容服务
CONTENT_API_URL=http://localhost:8016  # 内容平台 API 地址
CONTENT_API_KEY=  # 内容平台 API 密钥
CONTENT_ACCESS_TOKEN=  # 内容平台访问令牌

# 知乎 API 配置
# 申请地址：https://www.zhihu.com/api/v4/oauth
ZHIHU_APP_ID=your_zhihu_app_id  # 知乎应用 ID
ZHIHU_APP_SECRET=your_zhihu_app_secret  # 知乎应用密钥
ZHIHU_ACCESS_TOKEN=your_zhihu_access_token  # 知乎访问令牌

# 今日头条 API 配置
# 申请地址：https://open.toutiao.com/
TOUTIAO_APP_ID=your_toutiao_app_id  # 今日头条应用 ID
TOUTIAO_APP_SECRET=your_toutiao_app_secret  # 今日头条应用密钥
TOUTIAO_ACCESS_TOKEN=your_toutiao_access_token  # 今日头条访问令牌

# ---- 股票 / 金融数据 ----
# 配置股票和金融数据 API，用于获取实时行情、历史数据等

# 同花顺 API 配置
# 申请地址：https://tushare.pro/
TONGHUASHUN_API_KEY=your_ths_api_key  # 同花顺 API 密钥
TONGHUASHUN_API_SECRET=your_ths_api_secret  # 同花顺 API 密钥
THS_APP_KEY=your_ths_app_key  # 同花顺应用 Key
THS_APP_SECRET=your_ths_app_secret  # 同花顺应用密钥
THS_BASE_URL=https://api.10jqka.com.cn  # 同花顺 API 基础 URL

# Alpha Vantage API（可选，国际股票数据）
# 申请地址：https://www.alphavantage.co/support/#api-key
ALPHA_VANTAGE_API_KEY=your_alpha_vantage_key  # Alpha Vantage API 密钥

# ---- ERP系统API配置 ----
# 企业资源规划（ERP）系统 API 配置
# 用于与外部 ERP 系统（如 SAP、用友、金蝶等）集成
ERP_API_URL=http://localhost:8013  # ERP 系统 API 地址
ERP_API_KEY=your_erp_api_key  # ERP 系统 API 密钥
ERP_USERNAME=your_erp_username  # ERP 系统用户名
ERP_PASSWORD=your_erp_password  # ERP 系统密码（建议使用加密存储）

# ---- 内部微服务 / 网关 ----
# 配置内部微服务地址，用于服务间通信
# 如果使用 Docker Compose 部署，这些地址通常由服务名自动解析
API_GATEWAY_URL=http://localhost:8000  # API 网关地址（主入口）
RAG_SERVICE_URL=http://localhost:8011  # RAG（检索增强生成）服务地址
ERP_SERVICE_URL=http://localhost:8013  # ERP 服务地址
STOCK_SERVICE_URL=http://localhost:8015  # 股票数据服务地址
TREND_SERVICE_URL=http://localhost:8014  # 趋势分析服务地址
CONTENT_SERVICE_URL=http://localhost:8016  # 内容平台服务地址
AGENT_SERVICE_URL=http://localhost:8017  # Agent 服务地址
RESOURCE_SERVICE_URL=http://localhost:8018  # 资源管理服务地址
LEARNING_SERVICE_URL=http://localhost:8019  # 学习服务地址
OPENWEBUI_SERVICE_URL=http://localhost:8020  # OpenWebUI 服务地址

# ---- API重试配置 ----
# 配置外部 API 调用的重试策略，提高系统可靠性
API_MAX_RETRIES=3  # 最大重试次数，建议 3-5 次
API_RETRY_DELAY=1.0  # 重试延迟（秒），固定策略使用此值
API_RETRY_STRATEGY=exponential  # 重试策略：fixed（固定延迟）/ exponential（指数退避）/ linear（线性递增）
API_TIMEOUT=30.0  # API 请求超时时间（秒），建议 30-60 秒

# ---- API凭证加密配置 ----
# API 凭证加密密钥，用于加密存储敏感凭证（如 API 密钥、密码等）
# 留空将自动生成，但建议在生产环境手动设置强密钥
API_CREDENTIAL_ENCRYPTION_KEY=  # 32 字节密钥（建议使用 openssl rand -hex 32 生成）

# ---- 其他可选模块 ----
USE_VECTOR_CACHE=true  # 是否启用向量缓存，可提高检索性能
OPERATIONS_MODE=standalone  # 运行模式：standalone（单机）/ distributed（分布式）

# 如需多租户 / Docker Compose，请在对应 compose 文件中覆盖以上变量。