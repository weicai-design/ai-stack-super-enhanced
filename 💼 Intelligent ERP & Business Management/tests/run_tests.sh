#!/usr/bin/env bash
# ERPæ¨¡å—æµ‹è¯•è¿è¡Œè„šæœ¬

set -euo pipefail

cd "$(dirname "$0")/.."

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘      ğŸ§ª ERPæ¨¡å—æµ‹è¯•å¼€å§‹                                      â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# æ£€æŸ¥pytestæ˜¯å¦å®‰è£…
if ! command -v pytest >/dev/null 2>&1; then
    echo "âŒ é”™è¯¯: pytestæœªå®‰è£…ï¼Œè¯·å…ˆå®‰è£…: pip install pytest"
    exit 1
fi

# è¿è¡Œæµ‹è¯•
echo "ğŸ“‹ è¿è¡Œæ•°æ®åº“æ¨¡å‹æµ‹è¯•..."
pytest tests/test_database_models.py -v || echo "âš ï¸  æ•°æ®åº“æ¨¡å‹æµ‹è¯•å¤±è´¥"

echo ""
echo "ğŸ“‹ è¿è¡Œè´¢åŠ¡APIæµ‹è¯•..."
pytest tests/test_finance_api.py -v || echo "âš ï¸  è´¢åŠ¡APIæµ‹è¯•å¤±è´¥"

echo ""
echo "ğŸ“‹ è¿è¡Œç»è¥åˆ†æAPIæµ‹è¯•..."
pytest tests/test_analytics_api.py -v || echo "âš ï¸  ç»è¥åˆ†æAPIæµ‹è¯•å¤±è´¥"

echo ""
echo "ğŸ“‹ è¿è¡Œæµç¨‹ç®¡ç†APIæµ‹è¯•..."
pytest tests/test_process_api.py -v || echo "âš ï¸  æµç¨‹ç®¡ç†APIæµ‹è¯•å¤±è´¥"

echo ""
echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘      âœ… æ‰€æœ‰æµ‹è¯•å®Œæˆ                                          â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"

