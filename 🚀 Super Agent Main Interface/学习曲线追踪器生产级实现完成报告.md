# å­¦ä¹ æ›²çº¿è¿½è¸ªå™¨ç”Ÿäº§çº§å®ç°å®ŒæˆæŠ¥å‘Š

## ğŸ“‹ å‰ç½®æ ¡éªŒç»“æœ

### âœ… ç°æœ‰å®ç°æ£€æŸ¥
- âœ… `core/learning_curve_tracker.py` - å­¦ä¹ æ›²çº¿è¿½è¸ªå™¨ï¼ˆå·²å®Œå–„ï¼‰
- âœ… `core/self_learning.py` - è‡ªæˆ‘å­¦ä¹ ç³»ç»Ÿ
- âœ… `core/user_learning.py` - ç”¨æˆ·å­¦ä¹ ç³»ç»Ÿï¼ˆåœ¨å…¶ä»–æ¨¡å—ï¼‰

## âœ… ç”Ÿäº§çº§å®ç°å®Œæˆ

### 1. è¡Œä¸ºæ—¥å¿—èšåˆ âœ…

**å®ç°å†…å®¹**:
- âœ… è¡Œä¸ºæ—¥å¿—è®°å½•ï¼ˆrecord_behaviorï¼‰
  - ç”¨æˆ·è¡Œä¸ºè®°å½•
  - æ¨¡å—å’ŒåŠŸèƒ½è®°å½•
  - æˆåŠŸ/å¤±è´¥çŠ¶æ€
  - æ‰§è¡Œæ—¶é•¿è®°å½•
- âœ… è¡Œä¸ºæ—¥å¿—èšåˆï¼ˆaggregate_behavior_logsï¼‰
  - æŒ‰æ—¶é—´åˆ†ç»„ï¼ˆhour/day/week/monthï¼‰
  - æŒ‰ç”¨æˆ·ã€è¡Œä¸ºç±»å‹ã€æ¨¡å—è¿‡æ»¤
  - æˆåŠŸç‡ç»Ÿè®¡
  - å¹³å‡æ‰§è¡Œæ—¶é•¿ç»Ÿè®¡
  - è¡Œä¸ºç±»å‹åˆ†å¸ƒ
  - æ¨¡å—ä½¿ç”¨åˆ†å¸ƒ
- âœ… è¡Œä¸ºæ¨¡å¼åˆ†æï¼ˆanalyze_behavior_patternsï¼‰
  - æœ€å¸¸ç”¨æ¨¡å—åˆ†æ
  - æœ€å¸¸ç”¨åŠŸèƒ½åˆ†æ
  - è¡Œä¸ºç±»å‹åˆ†å¸ƒ
  - æ—¶é—´åˆ†å¸ƒï¼ˆæŒ‰å°æ—¶ã€æŒ‰æ˜ŸæœŸï¼‰
  - æˆåŠŸç‡åˆ†æ
  - æ´å¯Ÿç”Ÿæˆ

**åŠŸèƒ½ç‰¹æ€§**:
- è¡Œä¸ºæ—¥å¿—æ”¶é›†å’Œå­˜å‚¨
- å¤šç»´åº¦èšåˆåˆ†æ
- è¡Œä¸ºæ¨¡å¼è¯†åˆ«
- æ´å¯Ÿè‡ªåŠ¨ç”Ÿæˆ

### 2. æ¨¡å‹ç­–ç•¥æ›´æ–°æ¥å£ âœ…

**å®ç°å†…å®¹**:
- âœ… ç­–ç•¥åˆ›å»ºï¼ˆcreate_strategyï¼‰
  - æ¨¡å‹ç­–ç•¥åˆ›å»º
  - ç­–ç•¥ç‰ˆæœ¬ç®¡ç†
  - ç­–ç•¥é…ç½®å­˜å‚¨
- âœ… ç­–ç•¥æ›´æ–°ï¼ˆupdate_strategyï¼‰
  - ç­–ç•¥é…ç½®æ›´æ–°
  - æ€§èƒ½æŒ‡æ ‡æ›´æ–°
  - ç‰ˆæœ¬ç®¡ç†
- âœ… ç­–ç•¥æ¿€æ´»ï¼ˆactivate_strategyï¼‰
  - ç­–ç•¥æ¿€æ´»
  - è‡ªåŠ¨åœç”¨åŒæ¨¡å‹å…¶ä»–ç­–ç•¥
  - æ¿€æ´»çŠ¶æ€ç®¡ç†
- âœ… ç­–ç•¥æŸ¥è¯¢ï¼ˆget_strategy, list_strategiesï¼‰
  - å•ä¸ªç­–ç•¥æŸ¥è¯¢
  - ç­–ç•¥åˆ—è¡¨æŸ¥è¯¢
  - æ¿€æ´»ç­–ç•¥æŸ¥è¯¢

**åŠŸèƒ½ç‰¹æ€§**:
- ç­–ç•¥ç‰ˆæœ¬ç®¡ç†
- ç­–ç•¥æ¿€æ´»ç®¡ç†
- æ€§èƒ½æŒ‡æ ‡è·Ÿè¸ª
- ç­–ç•¥é…ç½®ç®¡ç†

### 3. ä¸“å®¶å»ºè®®è¡¨è”åŠ¨ âœ…

**å®ç°å†…å®¹**:
- âœ… å»ºè®®ç”Ÿæˆï¼ˆgenerate_expert_suggestionï¼‰
  - æ‰‹åŠ¨ç”Ÿæˆå»ºè®®
  - å»ºè®®ç±»å‹æ”¯æŒï¼ˆlearning/optimization/strategy/behaviorï¼‰
  - ä¼˜å…ˆçº§ç®¡ç†
  - çŠ¶æ€ç®¡ç†
- âœ… ä»å­¦ä¹ æ›²çº¿ç”Ÿæˆå»ºè®®ï¼ˆgenerate_suggestions_from_curveï¼‰
  - å‡†ç¡®ç‡ä¸‹é™æ£€æµ‹
  - å‡†ç¡®ç‡åœæ»æ£€æµ‹
  - è‡ªåŠ¨ç”Ÿæˆä¼˜åŒ–å»ºè®®
- âœ… ä»è¡Œä¸ºæ—¥å¿—ç”Ÿæˆå»ºè®®ï¼ˆgenerate_suggestions_from_behaviorï¼‰
  - æˆåŠŸç‡åˆ†æ
  - æ¨¡å—ä½¿ç”¨é—®é¢˜æ£€æµ‹
  - è‡ªåŠ¨ç”Ÿæˆæ”¹è¿›å»ºè®®
- âœ… å»ºè®®ç®¡ç†ï¼ˆupdate_suggestion_status, get_suggestionsï¼‰
  - å»ºè®®çŠ¶æ€æ›´æ–°
  - åé¦ˆè®°å½•
  - å»ºè®®æŸ¥è¯¢å’Œè¿‡æ»¤
- âœ… å»ºè®®ä¸å­¦ä¹ æ›²çº¿è”åŠ¨ï¼ˆlink_suggestion_to_curveï¼‰
  - å»ºè®®å…³è”åˆ°å­¦ä¹ æ›²çº¿
  - åŒå‘å…³è”ç®¡ç†

**åŠŸèƒ½ç‰¹æ€§**:
- æ™ºèƒ½å»ºè®®ç”Ÿæˆ
- å¤šæºå»ºè®®ï¼ˆå­¦ä¹ æ›²çº¿ã€è¡Œä¸ºæ—¥å¿—ï¼‰
- å»ºè®®çŠ¶æ€ç®¡ç†
- åé¦ˆæœºåˆ¶
- ä¸å­¦ä¹ æ›²çº¿è”åŠ¨

## ğŸ“Š åŠŸèƒ½ç‰¹æ€§

### è¡Œä¸ºæ—¥å¿—èšåˆ

**èšåˆç»´åº¦**:
- æ—¶é—´ç»´åº¦ï¼ˆhour/day/week/monthï¼‰
- ç”¨æˆ·ç»´åº¦
- è¡Œä¸ºç±»å‹ç»´åº¦
- æ¨¡å—ç»´åº¦

**åˆ†æåŠŸèƒ½**:
- è¡Œä¸ºæ¨¡å¼è¯†åˆ«
- æ—¶é—´åˆ†å¸ƒåˆ†æ
- æˆåŠŸç‡åˆ†æ
- æ´å¯Ÿç”Ÿæˆ

### æ¨¡å‹ç­–ç•¥æ›´æ–°

**ç­–ç•¥ç®¡ç†**:
- ç­–ç•¥åˆ›å»ºå’Œç‰ˆæœ¬ç®¡ç†
- ç­–ç•¥é…ç½®æ›´æ–°
- ç­–ç•¥æ¿€æ´»ç®¡ç†
- æ€§èƒ½æŒ‡æ ‡è·Ÿè¸ª

**ç­–ç•¥ç±»å‹**:
- å­¦ä¹ ç­–ç•¥
- ä¼˜åŒ–ç­–ç•¥
- æ‰§è¡Œç­–ç•¥

### ä¸“å®¶å»ºè®®è¡¨è”åŠ¨

**å»ºè®®ç±»å‹**:
- learning - å­¦ä¹ å»ºè®®
- optimization - ä¼˜åŒ–å»ºè®®
- strategy - ç­–ç•¥å»ºè®®
- behavior - è¡Œä¸ºå»ºè®®

**è”åŠ¨æœºåˆ¶**:
- å­¦ä¹ æ›²çº¿ â†’ å»ºè®®ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
- è¡Œä¸ºæ—¥å¿— â†’ å»ºè®®ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
- å»ºè®® â†’ å­¦ä¹ æ›²çº¿ï¼ˆå…³è”ï¼‰
- å»ºè®®åé¦ˆ â†’ å­¦ä¹ ç³»ç»Ÿï¼ˆåé¦ˆå­¦ä¹ ï¼‰

## ğŸ“ æ–‡ä»¶æ¸…å•

1. **æ ¸å¿ƒæ¨¡å—**:
   - `core/learning_curve_tracker.py` - å­¦ä¹ æ›²çº¿è¿½è¸ªå™¨ï¼ˆå·²å®Œå–„ï¼‰
     - è¡Œä¸ºæ—¥å¿—èšåˆ
     - æ¨¡å‹ç­–ç•¥æ›´æ–°
     - ä¸“å®¶å»ºè®®è¡¨è”åŠ¨

2. **APIç«¯ç‚¹**:
   - `api/learning_curve_api.py` - å­¦ä¹ æ›²çº¿APIï¼ˆæ–°åˆ›å»ºï¼‰
     - è¡Œä¸ºæ—¥å¿—API
     - æ¨¡å‹ç­–ç•¥API
     - ä¸“å®¶å»ºè®®API

3. **ä¸»åº”ç”¨**:
   - `api/main.py` - ä¸»åº”ç”¨ï¼ˆå·²æ›´æ–°ï¼‰
     - æ³¨å†Œå­¦ä¹ æ›²çº¿APIè·¯ç”±

## âœ… å®ŒæˆçŠ¶æ€

- [x] å‰ç½®æ ¡éªŒï¼šæ£€æŸ¥å­¦ä¹ æ›²çº¿è¿½è¸ªå™¨å®ç°çŠ¶æ€
- [x] æ·»åŠ è¡Œä¸ºæ—¥å¿—èšåˆï¼ˆæ”¶é›†ã€èšåˆã€åˆ†æï¼‰
- [x] æ·»åŠ æ¨¡å‹ç­–ç•¥æ›´æ–°æ¥å£ï¼ˆç­–ç•¥ç®¡ç†ã€æ›´æ–°ã€ç‰ˆæœ¬ç®¡ç†ï¼‰
- [x] å®ç°ä¸“å®¶å»ºè®®è¡¨è”åŠ¨ï¼ˆå»ºè®®è¡¨ã€ç”Ÿæˆé€»è¾‘ã€è”åŠ¨æœºåˆ¶ï¼‰

## ğŸ¯ ç”Ÿäº§çº§æ ‡å‡†è¾¾æˆ

### å®Œæ•´æ€§
- âœ… è¡Œä¸ºæ—¥å¿—èšåˆå®Œæ•´å®ç°
- âœ… æ¨¡å‹ç­–ç•¥æ›´æ–°å®Œæ•´å®ç°
- âœ… ä¸“å®¶å»ºè®®è¡¨è”åŠ¨å®Œæ•´å®ç°
- âœ… APIç«¯ç‚¹å®Œæ•´å®ç°

### å¯é æ€§
- âœ… å®Œå–„çš„å‚æ•°éªŒè¯
- âœ… å®Œå–„çš„é”™è¯¯å¤„ç†
- âœ… è¯¦ç»†çš„æ—¥å¿—è®°å½•
- âœ… æ•°æ®é™åˆ¶ï¼ˆæœ€å¤§æ—¥å¿—æ•°é‡ï¼‰

### å®‰å…¨æ€§
- âœ… å‚æ•°éªŒè¯
- âœ… é”™è¯¯å¤„ç†
- âœ… æƒé™æ£€æŸ¥ï¼ˆé€šè¿‡APIå±‚ï¼‰

### å¯ç»´æŠ¤æ€§
- âœ… æ¸…æ™°çš„ä»£ç ç»“æ„
- âœ… å®Œå–„çš„æ–‡æ¡£æ³¨é‡Š
- âœ… ç»Ÿä¸€çš„é”™è¯¯æ ¼å¼
- âœ… è¯¦ç»†çš„æ—¥å¿—è®°å½•

## ğŸ“Œ ä½¿ç”¨ç¤ºä¾‹

### 1. è®°å½•è¡Œä¸ºæ—¥å¿—

```python
from core.learning_curve_tracker import get_learning_curve_tracker

tracker = get_learning_curve_tracker()

# è®°å½•è¡Œä¸ºæ—¥å¿—
log = tracker.record_behavior(
    user_id="user_123",
    action_type="use",
    module="rag",
    function="retrieve",
    success=True,
    duration=0.5,
)
```

### 2. èšåˆè¡Œä¸ºæ—¥å¿—

```python
# èšåˆè¡Œä¸ºæ—¥å¿—
aggregated = tracker.aggregate_behavior_logs(
    user_id="user_123",
    start_time="2024-01-01T00:00:00Z",
    end_time="2024-01-31T23:59:59Z",
    group_by="day",
)

# åˆ†æè¡Œä¸ºæ¨¡å¼
patterns = tracker.analyze_behavior_patterns(
    user_id="user_123",
    days=30,
)
```

### 3. ç®¡ç†æ¨¡å‹ç­–ç•¥

```python
# åˆ›å»ºç­–ç•¥
strategy = tracker.create_strategy(
    model_name="gpt-4",
    strategy_name="optimized_prompt",
    strategy_config={
        "temperature": 0.7,
        "max_tokens": 2000,
    },
)

# æ›´æ–°ç­–ç•¥
tracker.update_strategy(
    strategy_id=strategy.strategy_id,
    performance_metrics={"accuracy": 95.5, "latency": 0.3},
)

# æ¿€æ´»ç­–ç•¥
tracker.activate_strategy(strategy.strategy_id)
```

### 4. ç”Ÿæˆå’Œç®¡ç†ä¸“å®¶å»ºè®®

```python
# ä»å­¦ä¹ æ›²çº¿ç”Ÿæˆå»ºè®®
suggestions = tracker.generate_suggestions_from_curve("curve_123")

# ä»è¡Œä¸ºæ—¥å¿—ç”Ÿæˆå»ºè®®
suggestions = tracker.generate_suggestions_from_behavior("user_123")

# æ›´æ–°å»ºè®®çŠ¶æ€
tracker.update_suggestion_status(
    suggestion_id="suggestion_123",
    status="accepted",
    feedback={"comment": "å»ºè®®å¾ˆæœ‰ç”¨"},
)

# å…³è”å»ºè®®åˆ°å­¦ä¹ æ›²çº¿
tracker.link_suggestion_to_curve("suggestion_123", "curve_123")
```

### 5. ä½¿ç”¨APIç«¯ç‚¹

```python
import requests

# è®°å½•è¡Œä¸ºæ—¥å¿—
response = requests.post(
    "http://localhost:8000/api/learning-curve/behavior/log",
    json={
        "user_id": "user_123",
        "action_type": "use",
        "module": "rag",
        "function": "retrieve",
        "success": True,
        "duration": 0.5,
    }
)

# èšåˆè¡Œä¸ºæ—¥å¿—
response = requests.post(
    "http://localhost:8000/api/learning-curve/behavior/aggregate",
    json={
        "user_id": "user_123",
        "group_by": "day",
    }
)

# åˆ›å»ºæ¨¡å‹ç­–ç•¥
response = requests.post(
    "http://localhost:8000/api/learning-curve/strategy/create",
    json={
        "model_name": "gpt-4",
        "strategy_name": "optimized_prompt",
        "strategy_config": {"temperature": 0.7},
    }
)

# ä»å­¦ä¹ æ›²çº¿ç”Ÿæˆå»ºè®®
response = requests.post(
    "http://localhost:8000/api/learning-curve/suggestion/generate-from-curve/curve_123"
)
```

## ğŸš€ ä¸‹ä¸€æ­¥

ç³»ç»Ÿå·²è¾¾åˆ°ç”Ÿäº§æ°´å¹³ï¼Œå¯ä»¥ï¼š
1. éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
2. å¼€å§‹æ”¶é›†è¡Œä¸ºæ—¥å¿—
3. é…ç½®æ¨¡å‹ç­–ç•¥
4. ä½¿ç”¨ä¸“å®¶å»ºè®®ä¼˜åŒ–ç³»ç»Ÿ
5. ç›‘æ§å­¦ä¹ æ›²çº¿å’Œæ”¹è¿›æ•ˆæœ

