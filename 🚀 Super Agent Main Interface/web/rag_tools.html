<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>RAG 预处理与真实性验证</title>
    <link rel="stylesheet" href="css/style.css" />
</head>
<body>
    <div class="app-container" style="padding:16px;">
        <h2>RAG 预处理与真实性验证</h2>
        <textarea id="src" style="width:100%; height:40vh; font-family:monospace;" placeholder="在此粘贴文本..."></textarea>
        <div style="margin:8px 0;">
            <button onclick="doClean()">清洗</button>
            <button onclick="doStd()">标准化</button>
            <button onclick="doDedup()">去重</button>
            <button onclick="doValidate()">验证</button>
            <button onclick="doAuth()">真实性评分</button>
        </div>
        <pre id="out" style="height:40vh; overflow:auto; background:#111; color:#eee; padding:12px;"></pre>
    </div>
    <script>
        const API = '/api/super-agent';
        const src = document.getElementById('src');
        const out = document.getElementById('out');
        async function call(path, body) {
            const r = await fetch(`${API}${path}`, {
                method: 'POST',
                headers: {'Content-Type':'application/json'},
                body: JSON.stringify(body)
            });
            return await r.json();
        }
        async function doClean() {
            const res = await call('/rag/preprocess/clean', { text: src.value });
            src.value = res.text || '';
            out.textContent = '✅ 清洗完成';
        }
        async function doStd() {
            const res = await call('/rag/preprocess/standardize', { text: src.value });
            src.value = res.text || '';
            out.textContent = '✅ 标准化完成';
        }
        async function doDedup() {
            const res = await call('/rag/preprocess/deduplicate', { text: src.value });
            src.value = res.unique_text || '';
            out.textContent = JSON.stringify({ removed: res.removed, kept: res.kept }, null, 2);
        }
        async function doValidate() {
            const res = await call('/rag/preprocess/validate', { text: src.value });
            out.textContent = JSON.stringify(res, null, 2);
        }
        async function doAuth() {
            const res = await call('/rag/authenticity/check', { text: src.value });
            out.textContent = JSON.stringify(res, null, 2);
        }
    </script>
</body>
</html>

