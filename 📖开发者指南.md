# AI Stack å¼€å‘è€…æŒ‡å—

> **ç‰ˆæœ¬**: v3.0  
> **æ›´æ–°æ—¶é—´**: 2025-01-06  
> **é€‚ç”¨äººç¾¤**: AI Stackç³»ç»Ÿå¼€å‘è€…å’Œè´¡çŒ®è€…

---

## ç›®å½•

1. [å¿«é€Ÿå¼€å§‹](#1-å¿«é€Ÿå¼€å§‹)
2. [ç³»ç»Ÿæ¶æ„](#2-ç³»ç»Ÿæ¶æ„)
3. [å¼€å‘ç¯å¢ƒè®¾ç½®](#3-å¼€å‘ç¯å¢ƒè®¾ç½®)
4. [ä»£ç è§„èŒƒ](#4-ä»£ç è§„èŒƒ)
5. [APIå¼€å‘æŒ‡å—](#5-apiå¼€å‘æŒ‡å—)
6. [å‰ç«¯å¼€å‘æŒ‡å—](#6-å‰ç«¯å¼€å‘æŒ‡å—)
7. [æ•°æ®åº“è®¾è®¡](#7-æ•°æ®åº“è®¾è®¡)
8. [æµ‹è¯•æŒ‡å—](#8-æµ‹è¯•æŒ‡å—)
9. [è°ƒè¯•æŠ€å·§](#9-è°ƒè¯•æŠ€å·§)
10. [å¸¸è§é—®é¢˜](#10-å¸¸è§é—®é¢˜)

---

## 1. å¿«é€Ÿå¼€å§‹

### 1.1 è·å–ä»£ç 

```bash
# å…‹éš†ä»“åº“
git clone <repository_url>
cd ai-stack-super-enhanced

# åˆ›å»ºå¼€å‘åˆ†æ”¯
git checkout -b feature/your-feature-name
```

### 1.2 ç¯å¢ƒå‡†å¤‡

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate  # Linux/macOS
# æˆ–
venv\Scripts\activate  # Windows

# å®‰è£…å¼€å‘ä¾èµ–
pip install -r requirements.txt
pip install -r requirements-dev.txt
```

### 1.3 å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# å¯åŠ¨AIäº¤äº’ä¸­å¿ƒï¼ˆå¸¦çƒ­é‡è½½ï¼‰
cd ai-chat-center
uvicorn chat_server:app --reload --port 8020

# å¯åŠ¨RAGç³»ç»Ÿ
cd ../ğŸ“š\ Enhanced\ RAG\ \&\ Knowledge\ Graph
uvicorn rag_server:app --reload --port 8011
```

---

## 2. ç³»ç»Ÿæ¶æ„

### 2.1 æ•´ä½“æ¶æ„

```
AI Stack
â”œâ”€â”€ å‰ç«¯å±‚ï¼ˆFrontendï¼‰
â”‚   â”œâ”€â”€ ç»Ÿä¸€æ§åˆ¶å°ï¼ˆVue.jsï¼‰
â”‚   â”œâ”€â”€ AIäº¤äº’ä¸­å¿ƒï¼ˆHTML/JSï¼‰
â”‚   â””â”€â”€ ERPå‰ç«¯ï¼ˆVue.js + Element Plusï¼‰
â”‚
â”œâ”€â”€ APIç½‘å…³å±‚ï¼ˆAPI Gatewayï¼‰
â”‚   â””â”€â”€ Nginxåå‘ä»£ç†
â”‚
â”œâ”€â”€ åº”ç”¨æœåŠ¡å±‚ï¼ˆApplication Servicesï¼‰
â”‚   â”œâ”€â”€ AIäº¤äº’ä¸­å¿ƒï¼ˆFastAPIï¼‰
â”‚   â”œâ”€â”€ RAGçŸ¥è¯†ç³»ç»Ÿï¼ˆFastAPIï¼‰
â”‚   â”œâ”€â”€ ERPä¸šåŠ¡ç³»ç»Ÿï¼ˆFastAPIï¼‰
â”‚   â”œâ”€â”€ è‚¡ç¥¨äº¤æ˜“ç³»ç»Ÿï¼ˆFastAPIï¼‰
â”‚   â”œâ”€â”€ å†…å®¹åˆ›ä½œç³»ç»Ÿï¼ˆFastAPIï¼‰
â”‚   â”œâ”€â”€ ä»»åŠ¡ä»£ç†ç³»ç»Ÿï¼ˆFastAPIï¼‰
â”‚   â”œâ”€â”€ èµ„æºç®¡ç†ç³»ç»Ÿï¼ˆFastAPIï¼‰
â”‚   â””â”€â”€ è‡ªæˆ‘å­¦ä¹ ç³»ç»Ÿï¼ˆFastAPIï¼‰
â”‚
â”œâ”€â”€ AIå¼•æ“å±‚ï¼ˆAI Engineï¼‰
â”‚   â”œâ”€â”€ OpenAI GPT
â”‚   â”œâ”€â”€ Ollamaæœ¬åœ°æ¨¡å‹
â”‚   â”œâ”€â”€ LangChainæ¡†æ¶
â”‚   â””â”€â”€ Sentence Transformers
â”‚
â”œâ”€â”€ æ•°æ®å±‚ï¼ˆData Layerï¼‰
â”‚   â”œâ”€â”€ SQLiteï¼ˆå…³ç³»æ•°æ®ï¼‰
â”‚   â”œâ”€â”€ ChromaDBï¼ˆå‘é‡æ•°æ®ï¼‰
â”‚   â””â”€â”€ Faissï¼ˆå‘é‡æ£€ç´¢ï¼‰
â”‚
â””â”€â”€ åŸºç¡€è®¾æ–½å±‚ï¼ˆInfrastructureï¼‰
    â”œâ”€â”€ Dockerå®¹å™¨åŒ–
    â”œâ”€â”€ ç›‘æ§å‘Šè­¦
    â”œâ”€â”€ æ—¥å¿—ç³»ç»Ÿ
    â””â”€â”€ å¤‡ä»½æ¢å¤
```

### 2.2 æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ | è¯´æ˜ |
|------|------|------|
| å‰ç«¯ | Vue.js 3 | æ¸è¿›å¼æ¡†æ¶ |
| UIåº“ | Element Plus | ç»„ä»¶åº“ |
| åç«¯ | FastAPI | é«˜æ€§èƒ½Pythonæ¡†æ¶ |
| AIæ¡†æ¶ | LangChain | AIåº”ç”¨å¼€å‘ |
| å‘é‡æ•°æ®åº“ | ChromaDB | å‘é‡å­˜å‚¨ |
| å…³ç³»æ•°æ®åº“ | SQLite | è½»é‡çº§æ•°æ®åº“ |
| å®¹å™¨åŒ– | Docker | éƒ¨ç½²æ‰“åŒ… |
| åå‘ä»£ç† | Nginx | è´Ÿè½½å‡è¡¡ |

---

## 3. å¼€å‘ç¯å¢ƒè®¾ç½®

### 3.1 å¿…éœ€å·¥å…·

```bash
# Python 3.11
python3 --version

# Node.js 18+
node --version

# Git
git --version

# Dockerï¼ˆå¯é€‰ï¼‰
docker --version
```

### 3.2 VS Codeé…ç½®

æ¨èå®‰è£…çš„æ‰©å±•ï¼š

```json
{
  "recommendations": [
    "ms-python.python",
    "ms-python.vscode-pylance",
    "Vue.volar",
    "dbaeumer.vscode-eslint",
    "esbenp.prettier-vscode",
    "ms-azuretools.vscode-docker"
  ]
}
```

### 3.3 ç¯å¢ƒå˜é‡

åˆ›å»º`.env`æ–‡ä»¶ï¼š

```bash
# AIé…ç½®
OPENAI_API_KEY=your_key_here
OLLAMA_BASE_URL=http://localhost:11434

# æ•°æ®åº“
DATABASE_URL=sqlite:///./data/main.db

# å®‰å…¨
JWT_SECRET_KEY=your_secret_key_here
API_KEY_SALT=your_salt_here

# è°ƒè¯•
DEBUG=True
LOG_LEVEL=DEBUG
```

---

## 4. ä»£ç è§„èŒƒ

### 4.1 Pythonä»£ç è§„èŒƒ

éµå¾ªPEP 8è§„èŒƒï¼š

```python
# âœ… å¥½çš„ç¤ºä¾‹
from typing import Dict, Any, List
import asyncio


class UserManager:
    """ç”¨æˆ·ç®¡ç†å™¨
    
    è´Ÿè´£ç”¨æˆ·çš„åˆ›å»ºã€æŸ¥è¯¢ã€æ›´æ–°å’Œåˆ é™¤æ“ä½œã€‚
    """
    
    def __init__(self, database_url: str):
        """
        åˆå§‹åŒ–ç”¨æˆ·ç®¡ç†å™¨
        
        Args:
            database_url: æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²
        """
        self.database_url = database_url
    
    async def create_user(
        self,
        username: str,
        email: str,
        role: str = "user"
    ) -> Dict[str, Any]:
        """
        åˆ›å»ºæ–°ç”¨æˆ·
        
        Args:
            username: ç”¨æˆ·å
            email: é‚®ç®±
            role: è§’è‰²ï¼Œé»˜è®¤ä¸ºuser
        
        Returns:
            ç”¨æˆ·ä¿¡æ¯å­—å…¸
        
        Raises:
            ValueError: ç”¨æˆ·åå·²å­˜åœ¨
        """
        # å®ç°ä»£ç 
        pass
```

### 4.2 å‘½åè§„èŒƒ

```python
# å˜é‡å’Œå‡½æ•°ï¼šå°å†™+ä¸‹åˆ’çº¿
user_name = "Alice"
def get_user_info():
    pass

# ç±»ï¼šé©¼å³°å‘½å
class UserManager:
    pass

# å¸¸é‡ï¼šå¤§å†™+ä¸‹åˆ’çº¿
MAX_RETRY_COUNT = 3
DEFAULT_TIMEOUT = 30
```

### 4.3 APIè·¯ç”±è§„èŒƒ

```python
from fastapi import APIRouter

router = APIRouter(prefix="/api/v1", tags=["users"])

# RESTfulé£æ ¼
@router.get("/users")  # è·å–ç”¨æˆ·åˆ—è¡¨
@router.post("/users")  # åˆ›å»ºç”¨æˆ·
@router.get("/users/{user_id}")  # è·å–å•ä¸ªç”¨æˆ·
@router.put("/users/{user_id}")  # æ›´æ–°ç”¨æˆ·
@router.delete("/users/{user_id}")  # åˆ é™¤ç”¨æˆ·
```

---

## 5. APIå¼€å‘æŒ‡å—

### 5.1 åˆ›å»ºæ–°çš„APIæ¨¡å—

**æ­¥éª¤1**: åˆ›å»ºæ–‡ä»¶ç»“æ„

```
your_module/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ api.py          # APIè·¯ç”±
â”œâ”€â”€ models.py       # æ•°æ®æ¨¡å‹
â”œâ”€â”€ services.py     # ä¸šåŠ¡é€»è¾‘
â””â”€â”€ schemas.py      # Pydanticæ¨¡å‹
```

**æ­¥éª¤2**: å®šä¹‰æ•°æ®æ¨¡å‹ï¼ˆschemas.pyï¼‰

```python
from pydantic import BaseModel, Field
from typing import Optional

class UserCreate(BaseModel):
    """åˆ›å»ºç”¨æˆ·è¯·æ±‚æ¨¡å‹"""
    username: str = Field(..., min_length=3, max_length=50)
    email: str = Field(..., regex=r'^[\w\.-]+@[\w\.-]+\.\w+$')
    password: str = Field(..., min_length=8)

class UserResponse(BaseModel):
    """ç”¨æˆ·å“åº”æ¨¡å‹"""
    id: int
    username: str
    email: str
    created_at: str
    
    class Config:
        from_attributes = True
```

**æ­¥éª¤3**: å®ç°ä¸šåŠ¡é€»è¾‘ï¼ˆservices.pyï¼‰

```python
from typing import Dict, Any, List

class UserService:
    """ç”¨æˆ·æœåŠ¡"""
    
    def __init__(self, db):
        self.db = db
    
    async def create_user(self, user_data: Dict[str, Any]) -> Dict[str, Any]:
        """åˆ›å»ºç”¨æˆ·"""
        # å®ç°ä¸šåŠ¡é€»è¾‘
        pass
    
    async def get_users(self, skip: int = 0, limit: int = 100) -> List[Dict[str, Any]]:
        """è·å–ç”¨æˆ·åˆ—è¡¨"""
        # å®ç°ä¸šåŠ¡é€»è¾‘
        pass
```

**æ­¥éª¤4**: å®šä¹‰APIè·¯ç”±ï¼ˆapi.pyï¼‰

```python
from fastapi import APIRouter, Depends, HTTPException
from .schemas import UserCreate, UserResponse
from .services import UserService

router = APIRouter(prefix="/api/users", tags=["users"])

@router.post("/", response_model=UserResponse)
async def create_user(
    user: UserCreate,
    service: UserService = Depends(get_user_service)
):
    """åˆ›å»ºæ–°ç”¨æˆ·"""
    try:
        result = await service.create_user(user.dict())
        return result
    except Exception as e:
        raise HTTPException(status_code=400, detail=str(e))
```

### 5.2 é”™è¯¯å¤„ç†

```python
from fastapi import HTTPException, status

# ä½¿ç”¨æ ‡å‡†HTTPçŠ¶æ€ç 
raise HTTPException(
    status_code=status.HTTP_404_NOT_FOUND,
    detail="ç”¨æˆ·ä¸å­˜åœ¨"
)

# è‡ªå®šä¹‰é”™è¯¯å“åº”
from fastapi.responses import JSONResponse

@app.exception_handler(ValueError)
async def value_error_handler(request, exc):
    return JSONResponse(
        status_code=400,
        content={
            "error": "ValidationError",
            "message": str(exc)
        }
    )
```

### 5.3 ä¾èµ–æ³¨å…¥

```python
from fastapi import Depends

def get_db():
    """è·å–æ•°æ®åº“è¿æ¥"""
    db = Database()
    try:
        yield db
    finally:
        db.close()

@router.get("/users")
async def get_users(db = Depends(get_db)):
    """ä½¿ç”¨ä¾èµ–æ³¨å…¥"""
    return db.query_users()
```

---

## 6. å‰ç«¯å¼€å‘æŒ‡å—

### 6.1 Vue.jsç»„ä»¶ç»“æ„

```vue
<template>
  <div class="user-list">
    <div v-for="user in users" :key="user.id" class="user-card">
      <h3>{{ user.username }}</h3>
      <p>{{ user.email }}</p>
    </div>
  </div>
</template>

<script>
export default {
  name: 'UserList',
  data() {
    return {
      users: []
    };
  },
  mounted() {
    this.fetchUsers();
  },
  methods: {
    async fetchUsers() {
      try {
        const response = await fetch('/api/users');
        this.users = await response.json();
      } catch (error) {
        console.error('è·å–ç”¨æˆ·å¤±è´¥:', error);
      }
    }
  }
};
</script>

<style scoped>
.user-list {
  display: grid;
  gap: 20px;
}

.user-card {
  padding: 20px;
  border: 1px solid #ddd;
  border-radius: 8px;
}
</style>
```

### 6.2 APIè°ƒç”¨å°è£…

```javascript
// api/client.js
class APIClient {
  constructor(baseURL) {
    this.baseURL = baseURL;
  }

  async request(endpoint, options = {}) {
    const url = `${this.baseURL}${endpoint}`;
    
    const response = await fetch(url, {
      ...options,
      headers: {
        'Content-Type': 'application/json',
        ...options.headers
      }
    });

    if (!response.ok) {
      throw new Error(`APIé”™è¯¯: ${response.status}`);
    }

    return response.json();
  }

  get(endpoint) {
    return this.request(endpoint);
  }

  post(endpoint, data) {
    return this.request(endpoint, {
      method: 'POST',
      body: JSON.stringify(data)
    });
  }
}

export const api = new APIClient('http://localhost:8020');
```

---

## 7. æ•°æ®åº“è®¾è®¡

### 7.1 SQLiteæ•°æ®åº“

```python
from sqlalchemy import create_engine, Column, Integer, String, DateTime
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker
from datetime import datetime

Base = declarative_base()

class User(Base):
    """ç”¨æˆ·è¡¨"""
    __tablename__ = 'users'
    
    id = Column(Integer, primary_key=True, autoincrement=True)
    username = Column(String(50), unique=True, nullable=False)
    email = Column(String(100), unique=True, nullable=False)
    created_at = Column(DateTime, default=datetime.now)
    updated_at = Column(DateTime, default=datetime.now, onupdate=datetime.now)

# åˆ›å»ºæ•°æ®åº“
engine = create_engine('sqlite:///./data/app.db')
Base.metadata.create_all(engine)
```

### 7.2 ChromaDBå‘é‡æ•°æ®åº“

```python
import chromadb

# åˆå§‹åŒ–å®¢æˆ·ç«¯
client = chromadb.Client()

# åˆ›å»ºé›†åˆ
collection = client.create_collection(
    name="documents",
    metadata={"description": "æ–‡æ¡£å‘é‡å­˜å‚¨"}
)

# æ·»åŠ æ–‡æ¡£
collection.add(
    documents=["è¿™æ˜¯ç¬¬ä¸€ä¸ªæ–‡æ¡£", "è¿™æ˜¯ç¬¬äºŒä¸ªæ–‡æ¡£"],
    metadatas=[{"source": "doc1"}, {"source": "doc2"}],
    ids=["id1", "id2"]
)

# æŸ¥è¯¢
results = collection.query(
    query_texts=["æŸ¥è¯¢æ–‡æœ¬"],
    n_results=5
)
```

---

## 8. æµ‹è¯•æŒ‡å—

### 8.1 å•å…ƒæµ‹è¯•

```python
import pytest
from your_module.services import UserService

@pytest.fixture
def user_service():
    """åˆ›å»ºæµ‹è¯•ç”¨æˆ·æœåŠ¡"""
    return UserService(db=MockDatabase())

def test_create_user(user_service):
    """æµ‹è¯•åˆ›å»ºç”¨æˆ·"""
    user_data = {
        "username": "testuser",
        "email": "test@example.com"
    }
    
    result = user_service.create_user(user_data)
    
    assert result["username"] == "testuser"
    assert "id" in result
```

### 8.2 é›†æˆæµ‹è¯•

```python
from fastapi.testclient import TestClient
from main import app

client = TestClient(app)

def test_create_user_api():
    """æµ‹è¯•åˆ›å»ºç”¨æˆ·API"""
    response = client.post(
        "/api/users",
        json={
            "username": "testuser",
            "email": "test@example.com",
            "password": "password123"
        }
    )
    
    assert response.status_code == 200
    data = response.json()
    assert data["username"] == "testuser"
```

### 8.3 è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæ–‡ä»¶
pytest tests/test_users.py

# æ˜¾ç¤ºè¦†ç›–ç‡
pytest --cov=your_module --cov-report=html
```

---

## 9. è°ƒè¯•æŠ€å·§

### 9.1 Pythonè°ƒè¯•

```python
# ä½¿ç”¨pdb
import pdb; pdb.set_trace()

# ä½¿ç”¨logging
import logging
logging.basicConfig(level=logging.DEBUG)
logger = logging.getLogger(__name__)

logger.debug("è°ƒè¯•ä¿¡æ¯")
logger.info("æ™®é€šä¿¡æ¯")
logger.error("é”™è¯¯ä¿¡æ¯")
```

### 9.2 FastAPIè°ƒè¯•

```python
# å¯ç”¨è¯¦ç»†é”™è¯¯ä¿¡æ¯
app = FastAPI(debug=True)

# æŸ¥çœ‹è‡ªåŠ¨ç”Ÿæˆçš„APIæ–‡æ¡£
# è®¿é—® http://localhost:8020/docs
```

### 9.3 å‰ç«¯è°ƒè¯•

```javascript
// ä½¿ç”¨console
console.log('å˜é‡å€¼:', variable);
console.table(arrayData);
console.error('é”™è¯¯ä¿¡æ¯');

// ä½¿ç”¨debugger
function myFunction() {
  debugger;  // åœ¨è¿™é‡Œæš‚åœ
  // ä»£ç ...
}
```

---

## 10. å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•æ·»åŠ æ–°çš„APIç«¯ç‚¹ï¼Ÿ

å‚è€ƒ[5.1 åˆ›å»ºæ–°çš„APIæ¨¡å—](#51-åˆ›å»ºæ–°çš„apiæ¨¡å—)

### Q2: å¦‚ä½•å¤„ç†è·¨åŸŸé—®é¢˜ï¼Ÿ

```python
from fastapi.middleware.cors import CORSMiddleware

app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

### Q3: å¦‚ä½•ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½ï¼Ÿ

- ä½¿ç”¨ç´¢å¼•
- æ‰¹é‡æ“ä½œ
- è¿æ¥æ± 
- ç¼“å­˜æŸ¥è¯¢ç»“æœ

### Q4: å¦‚ä½•è´¡çŒ®ä»£ç ï¼Ÿ

1. Forkä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤ä»£ç ï¼ˆéµå¾ªè§„èŒƒï¼‰
4. åˆ›å»ºPull Request
5. ç­‰å¾…ä»£ç å®¡æŸ¥

---

## é™„å½•

### A. æœ‰ç”¨çš„èµ„æº

- [FastAPIæ–‡æ¡£](https://fastapi.tiangolo.com/)
- [Vue.jsæ–‡æ¡£](https://vuejs.org/)
- [Pythonæœ€ä½³å®è·µ](https://docs.python-guide.org/)
- [LangChainæ–‡æ¡£](https://python.langchain.com/)

### B. è”ç³»æ–¹å¼

- æŠ€æœ¯æ”¯æŒï¼šæŸ¥çœ‹å„æ¨¡å—README
- é—®é¢˜åé¦ˆï¼šæäº¤GitHub Issue

---

**æ–‡æ¡£ç»´æŠ¤**: AI Stackå¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°**: 2025-01-06

