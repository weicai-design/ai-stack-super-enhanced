<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Stack å‘½ä»¤é¢æ¿ v2.0</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* å†…è”å…³é”®CSSä»¥ç¡®ä¿å¿«é€ŸåŠ è½½ */
        body { margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
        .loading-screen { position: fixed; inset: 0; background: #1a1a2e; display: flex; align-items: center; justify-content: center; z-index: 9999; }
        .loading-screen.hide { opacity: 0; pointer-events: none; transition: opacity 0.5s; }
    </style>
</head>
<body data-theme="dark">
    <!-- åŠ è½½å±å¹• -->
    <div class="loading-screen" id="loadingScreen">
        <div class="spinner"></div>
    </div>

    <div class="container">
        <!-- å¤´éƒ¨ -->
        <div class="header">
            <div class="header-content">
                <h1>ğŸ¯ AI Stack å‘½ä»¤é¢æ¿</h1>
                <p>100%å®Œæˆåº¦ â€¢ v2.0.0 å®Œç¾ç‰ˆ â€¢ 175+ä¸ªAPI â€¢ 13ä¸ªERPæ¨¡å—</p>
            </div>
            <div class="header-actions">
                <button class="theme-toggle" onclick="toggleTheme()">
                    <span id="themeIcon">ğŸŒ™</span> åˆ‡æ¢ä¸»é¢˜
                </button>
            </div>
        </div>

        <!-- å¿«é€Ÿé“¾æ¥ -->
        <div class="quick-links">
            <a href="http://localhost:3000" class="quick-link" target="_blank">
                <span>ğŸ’¬</span> OpenWebUI
            </a>
            <a href="http://localhost:8012" class="quick-link" target="_blank">
                <span>ğŸ’¼</span> ERPç³»ç»Ÿ
            </a>
            <a href="http://localhost:8013/docs" class="quick-link" target="_blank">
                <span>ğŸ“–</span> APIæ–‡æ¡£
            </a>
            <a href="../monitoring/dashboard.html" class="quick-link" target="_blank">
                <span>ğŸ“Š</span> ç³»ç»Ÿç›‘æ§
            </a>
        </div>

        <!-- è‡ªå®šä¹‰å‘½ä»¤è¾“å…¥ -->
        <div class="command-section">
            <h3>è‡ªå®šä¹‰å‘½ä»¤</h3>
            <div class="input-group">
                <input 
                    type="text" 
                    id="customCommand" 
                    class="command-input" 
                    placeholder="è¾“å…¥å‘½ä»¤ï¼Œå¦‚ï¼šæŸ¥çœ‹æœ¬æœˆè´¢åŠ¡ã€æŸ¥çœ‹ç‰©æ–™åˆ—è¡¨ã€æŸ¥çœ‹ç”Ÿäº§è®¢å•..." 
                    autocomplete="off"
                    list="commandSuggestions"
                />
                <datalist id="commandSuggestions">
                    <option value="æŸ¥çœ‹æ‰€æœ‰ç³»ç»ŸçŠ¶æ€">
                    <option value="æŸ¥çœ‹ç³»ç»Ÿèµ„æº">
                    <option value="æŸ¥çœ‹æœ¬æœˆè´¢åŠ¡">
                    <option value="æŸ¥çœ‹å®¢æˆ·åˆ—è¡¨">
                    <option value="æŸ¥çœ‹çŸ¥è¯†åº“ç»Ÿè®¡">
                    <option value="æŸ¥çœ‹ç‰©æ–™åˆ—è¡¨">
                    <option value="æŸ¥çœ‹ç”Ÿäº§è®¢å•">
                    <option value="æŸ¥çœ‹è®¾å¤‡å°è´¦">
                    <option value="æŸ¥çœ‹å·¥è‰ºè·¯çº¿">
                    <option value="æŸ¥çœ‹AAPLè‚¡ç¥¨">
                </datalist>
                <button class="command-button" onclick="executeCustomCommand()">
                    æ‰§è¡Œ
                </button>
            </div>
            <div style="margin-top: 12px; color: var(--text-secondary); font-size: 13px;">
                ğŸ’¡ æç¤ºï¼šæ”¯æŒå›è½¦é”®å¿«é€Ÿæ‰§è¡Œ | è¾“å…¥æ—¶æ˜¾ç¤ºå»ºè®®å‘½ä»¤
            </div>
        </div>

        <!-- å¿«æ·å‘½ä»¤æ ‡é¢˜ -->
        <h2 class="section-title">å¿«æ·å‘½ä»¤</h2>

        <!-- å‘½ä»¤ç½‘æ ¼ -->
        <div class="command-grid">
            <!-- ç³»ç»Ÿç±» -->
            <div class="command-card" onclick="executeCommand('æŸ¥çœ‹æ‰€æœ‰ç³»ç»ŸçŠ¶æ€')">
                <div class="icon">ğŸŒ</div>
                <div class="title">ç³»ç»ŸçŠ¶æ€</div>
                <div class="desc">æŸ¥çœ‹æ‰€æœ‰9ä¸ªç³»ç»Ÿçš„è¿è¡ŒçŠ¶æ€å’Œå¥åº·æ£€æŸ¥</div>
            </div>

            <div class="command-card" onclick="executeCommand('æŸ¥çœ‹ç³»ç»Ÿèµ„æº')">
                <div class="icon">âš™ï¸</div>
                <div class="title">ç³»ç»Ÿèµ„æº</div>
                <div class="desc">æŸ¥çœ‹CPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨æƒ…å†µ</div>
            </div>

            <!-- è´¢åŠ¡ç±» -->
            <div class="command-card" onclick="executeCommand('æŸ¥çœ‹æœ¬æœˆè´¢åŠ¡')">
                <div class="icon">ğŸ’°</div>
                <div class="title">æœ¬æœˆè´¢åŠ¡</div>
                <div class="desc">ERPè´¢åŠ¡çœ‹æ¿ - æ”¶å…¥/æ”¯å‡º/åˆ©æ¶¦æ•°æ®</div>
            </div>

            <div class="command-card" onclick="executeCommand('æŸ¥çœ‹æœ¬å‘¨è´¢åŠ¡')">
                <div class="icon">ğŸ“…</div>
                <div class="title">æœ¬å‘¨è´¢åŠ¡</div>
                <div class="desc">æŸ¥çœ‹æœ¬å‘¨è´¢åŠ¡æ•°æ®å’Œè¶‹åŠ¿</div>
            </div>

            <!-- ä¸šåŠ¡ç±» -->
            <div class="command-card" onclick="executeCommand('æŸ¥çœ‹å®¢æˆ·åˆ—è¡¨')">
                <div class="icon">ğŸ‘¥</div>
                <div class="title">å®¢æˆ·åˆ—è¡¨</div>
                <div class="desc">æŸ¥çœ‹ERPå®¢æˆ·ç®¡ç†åˆ—è¡¨å’Œç»Ÿè®¡</div>
            </div>

            <div class="command-card" onclick="executeCommand('æŸ¥çœ‹è®¢å•åˆ—è¡¨')">
                <div class="icon">ğŸ“‹</div>
                <div class="title">è®¢å•åˆ—è¡¨</div>
                <div class="desc">æŸ¥çœ‹è®¢å•çŠ¶æ€å’Œè¿›åº¦</div>
            </div>

            <!-- åˆ¶é€ ç±»ï¼ˆæ–°å¢ï¼‰ -->
            <div class="command-card" onclick="executeCommand('æŸ¥çœ‹ç‰©æ–™åˆ—è¡¨')">
                <div class="icon">ğŸ“¦</div>
                <div class="title">ç‰©æ–™ç®¡ç†</div>
                <div class="desc">æŸ¥çœ‹245+ç§ç‰©æ–™åº“å­˜å’Œé¢„è­¦</div>
            </div>

            <div class="command-card" onclick="executeCommand('æŸ¥çœ‹ç”Ÿäº§è®¢å•')">
                <div class="icon">ğŸ­</div>
                <div class="title">ç”Ÿäº§è®¢å•</div>
                <div class="desc">æŸ¥çœ‹ç”Ÿäº§è®¡åˆ’å’Œæ‰§è¡Œè¿›åº¦</div>
            </div>

            <div class="command-card" onclick="executeCommand('æŸ¥çœ‹è®¾å¤‡å°è´¦')">
                <div class="icon">ğŸ”§</div>
                <div class="title">è®¾å¤‡ç®¡ç†</div>
                <div class="desc">æŸ¥çœ‹45+å°è®¾å¤‡çŠ¶æ€å’Œç»´æŠ¤</div>
            </div>

            <div class="command-card" onclick="executeCommand('æŸ¥çœ‹å·¥è‰ºè·¯çº¿')">
                <div class="icon">âš—ï¸</div>
                <div class="title">å·¥è‰ºç®¡ç†</div>
                <div class="desc">æŸ¥çœ‹25+æ¡å·¥è‰ºè·¯çº¿å’Œå‚æ•°</div>
            </div>

            <!-- AIç±» -->
            <div class="command-card" onclick="executeCommand('æŸ¥çœ‹çŸ¥è¯†åº“ç»Ÿè®¡')">
                <div class="icon">ğŸ“š</div>
                <div class="title">çŸ¥è¯†åº“</div>
                <div class="desc">RAGçŸ¥è¯†åº“ç»Ÿè®¡ä¿¡æ¯å’Œæ£€ç´¢æ¬¡æ•°</div>
            </div>

            <div class="command-card" onclick="executeCommand('æŸ¥çœ‹è¿è¡Œä¸­çš„ä»»åŠ¡')">
                <div class="icon">ğŸ¤–</div>
                <div class="title">è¿è¡Œä»»åŠ¡</div>
                <div class="desc">ä»»åŠ¡ä»£ç†ç³»ç»Ÿä¸­çš„æ´»è·ƒä»»åŠ¡</div>
            </div>

            <!-- é‡‘èç±» -->
            <div class="command-card" onclick="executeCommand('æŸ¥çœ‹AAPLè‚¡ç¥¨')">
                <div class="icon">ğŸ“ˆ</div>
                <div class="title">è‚¡ç¥¨è¡Œæƒ…</div>
                <div class="desc">æŸ¥çœ‹AAPLè‚¡ç¥¨å®æ—¶è¡Œæƒ…å’Œåˆ†æ</div>
            </div>

            <!-- åˆ†æç±» -->
            <div class="command-card" onclick="executeCommand('ç³»ç»Ÿè¿è¡Œæƒ…å†µ')">
                <div class="icon">ğŸ§ </div>
                <div class="title">ç³»ç»Ÿåˆ†æ</div>
                <div class="desc">è·å–ç³»ç»Ÿè‡ªæˆ‘åˆ†æå’Œä¼˜åŒ–å»ºè®®</div>
            </div>

            <div class="command-card" onclick="executeCommand('MRPè®¡ç®—')">
                <div class="icon">ğŸ“Š</div>
                <div class="title">MRPè®¡ç®—</div>
                <div class="desc">ç‰©æ–™éœ€æ±‚è®¡åˆ’æ™ºèƒ½è®¡ç®—</div>
            </div>

            <div class="command-card" onclick="executeCommand('OEEåˆ†æ')">
                <div class="icon">âš¡</div>
                <div class="title">OEEåˆ†æ</div>
                <div class="desc">è®¾å¤‡ç»¼åˆæ•ˆç‡åˆ†æ</div>
            </div>

            <!-- å¸®åŠ© -->
            <div class="command-card" onclick="executeCommand('å¸®åŠ©')">
                <div class="icon">â“</div>
                <div class="title">å¸®åŠ©</div>
                <div class="desc">æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‘½ä»¤å’Œä½¿ç”¨è¯´æ˜</div>
            </div>

            <div class="command-card" onclick="showProjectInfo()">
                <div class="icon">â„¹ï¸</div>
                <div class="title">é¡¹ç›®ä¿¡æ¯</div>
                <div class="desc">æŸ¥çœ‹é¡¹ç›®è¯¦ç»†ä¿¡æ¯å’Œç»Ÿè®¡æ•°æ®</div>
            </div>
        </div>

        <!-- ç»“æœæ˜¾ç¤ºåŒº -->
        <div class="result-container" id="resultContainer">
            <div class="result-header">
                <h2>æ‰§è¡Œç»“æœ</h2>
                <button class="btn-clear" onclick="clearResult()">æ¸…é™¤</button>
            </div>
            <div class="result-content" id="resultContent"></div>
        </div>
    </div>

    <script>
        const API_URL = 'http://localhost:8020';

        // é¡µé¢åŠ è½½å®Œæˆ
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('loadingScreen').classList.add('hide');
            }, 500);
            
            // åŠ è½½ä¸»é¢˜è®¾ç½®
            const savedTheme = localStorage.getItem('theme') || 'dark';
            setTheme(savedTheme);
        });

        // ä¸»é¢˜åˆ‡æ¢
        function toggleTheme() {
            const currentTheme = document.body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            setTheme(newTheme);
        }

        function setTheme(theme) {
            document.body.setAttribute('data-theme', theme);
            localStorage.setItem('theme', theme);
            const icon = document.getElementById('themeIcon');
            icon.textContent = theme === 'dark' ? 'ğŸŒ™' : 'â˜€ï¸';
        }

        // æ‰§è¡Œå‘½ä»¤
        async function executeCommand(command) {
            showLoading();
            
            try {
                const response = await fetch(
                    `${API_URL}/execute?command=${encodeURIComponent(command)}`,
                    { timeout: 10000 }
                );
                
                const data = await response.json();
                displayResult(command, data);
            } catch (error) {
                displayError(command, error.message);
            }
        }

        // è‡ªå®šä¹‰å‘½ä»¤
        async function executeCustomCommand() {
            const command = document.getElementById('customCommand').value.trim();
            if (!command) {
                alert('è¯·è¾“å…¥å‘½ä»¤');
                return;
            }
            
            await executeCommand(command);
        }

        // æ˜¾ç¤ºåŠ è½½
        function showLoading() {
            const container = document.getElementById('resultContainer');
            const content = document.getElementById('resultContent');
            
            container.classList.add('show');
            content.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <div>æ‰§è¡Œä¸­...</div>
                </div>
            `;
        }

        // æ˜¾ç¤ºç»“æœ
        function displayResult(command, data) {
            const content = document.getElementById('resultContent');
            
            let html = `<div style="color: var(--text-accent); margin-bottom: 15px; font-weight: bold;">ğŸ“ å‘½ä»¤: ${command}</div>`;
            
            if (data.error) {
                html += `<div style="color: #f44336;">âŒ é”™è¯¯: ${data.error}</div>`;
            } else {
                html += formatResult(data);
            }
            
            content.innerHTML = html;
        }

        // æ ¼å¼åŒ–ç»“æœ
        function formatResult(data) {
            // è¿™é‡Œå¯ä»¥æ ¹æ®æ•°æ®ç±»å‹è¿›è¡Œç¾åŒ–æ˜¾ç¤º
            return `<pre style="color: var(--text-primary); white-space: pre-wrap;">${JSON.stringify(data, null, 2)}</pre>`;
        }

        // æ˜¾ç¤ºé”™è¯¯
        function displayError(command, error) {
            const content = document.getElementById('resultContent');
            content.innerHTML = `
                <div style="color: var(--text-accent); margin-bottom: 15px; font-weight: bold;">ğŸ“ å‘½ä»¤: ${command}</div>
                <div style="color: #f44336; padding: 15px; background: var(--bg-tertiary); border-radius: 8px; border-left: 4px solid #f44336;">
                    âŒ é”™è¯¯: ${error}
                    <div style="margin-top: 10px; font-size: 12px; color: var(--text-secondary);">
                        æç¤º: è¯·ç¡®ä¿å‘½ä»¤ç½‘å…³æœåŠ¡æ­£åœ¨è¿è¡Œ (ç«¯å£8020)
                    </div>
                </div>
            `;
        }

        // æ¸…é™¤ç»“æœ
        function clearResult() {
            document.getElementById('resultContainer').classList.remove('show');
        }

        // æ˜¾ç¤ºé¡¹ç›®ä¿¡æ¯
        function showProjectInfo() {
            const content = document.getElementById('resultContent');
            const container = document.getElementById('resultContainer');
            
            container.classList.add('show');
            content.innerHTML = `
                <div style="color: var(--text-accent); font-size: 24px; margin-bottom: 20px; font-weight: bold;">
                    ğŸ† AI Stack Super Enhanced v2.0.0
                </div>
                
                <div style="background: var(--bg-tertiary); padding: 20px; border-radius: 10px; margin-bottom: 15px;">
                    <div style="font-size: 18px; color: #4caf50; margin-bottom: 15px;">âœ… é¡¹ç›®å®Œæˆåº¦ï¼š100%</div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;">
                        <div>
                            <div style="color: var(--text-secondary); font-size: 13px;">ä»£ç è¡Œæ•°</div>
                            <div style="font-size: 24px; color: #667eea; font-weight: bold;">23,500+</div>
                        </div>
                        <div>
                            <div style="color: var(--text-secondary); font-size: 13px;">APIæ¥å£</div>
                            <div style="font-size: 24px; color: #667eea; font-weight: bold;">175+</div>
                        </div>
                        <div>
                            <div style="color: var(--text-secondary); font-size: 13px;">ERPæ¨¡å—</div>
                            <div style="font-size: 24px; color: #667eea; font-weight: bold;">13/13</div>
                        </div>
                        <div>
                            <div style="color: var(--text-secondary); font-size: 13px;">ä¸“å®¶æ¨¡å‹</div>
                            <div style="font-size: 24px; color: #667eea; font-weight: bold;">7ä¸ª</div>
                        </div>
                        <div>
                            <div style="color: var(--text-secondary); font-size: 13px;">å¼€å‘å·¥æ—¶</div>
                            <div style="font-size: 24px; color: #667eea; font-weight: bold;">16å°æ—¶</div>
                        </div>
                        <div>
                            <div style="color: var(--text-secondary); font-size: 13px;">æ•ˆç‡æå‡</div>
                            <div style="font-size: 24px; color: #4caf50; font-weight: bold;">175å€</div>
                        </div>
                    </div>
                </div>
                
                <div style="background: var(--bg-tertiary); padding: 20px; border-radius: 10px;">
                    <div style="margin-bottom: 10px; color: var(--text-accent); font-weight: bold;">ğŸ¯ æ ¸å¿ƒæˆå°±ï¼š</div>
                    <div style="line-height: 2;">
                        âœ… 9å¤§æ ¸å¿ƒç³»ç»Ÿå…¨éƒ¨å®Œæˆ<br>
                        âœ… ERP 13ä¸ªæ¨¡å—100%å®ç°<br>
                        âœ… 175+ä¸ªAPIæ¥å£<br>
                        âœ… 7ä¸ªé¢†åŸŸä¸“å®¶æ¨¡å‹<br>
                        âœ… 70+ä»½å®Œæ•´æ–‡æ¡£<br>
                        âœ… ä¸€é”®éƒ¨ç½²ï¼Œ3åˆ†é’Ÿå¯åŠ¨<br>
                        âœ… å·¥ä¸šçº§åŠŸèƒ½ï¼ˆMRP/OEE/MTBFç­‰ï¼‰<br>
                        âœ… SSS++å®Œç¾è¯„çº§
                    </div>
                </div>
            `;
        }

        // å›è½¦æ‰§è¡Œ
        document.getElementById('customCommand').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                executeCustomCommand();
            }
        });

        // å¿«æ·é”®æ”¯æŒ
        document.addEventListener('keydown', (e) => {
            // Ctrl/Cmd + K èšç„¦åˆ°å‘½ä»¤è¾“å…¥
            if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                e.preventDefault();
                document.getElementById('customCommand').focus();
            }
            
            // Esc æ¸…é™¤ç»“æœ
            if (e.key === 'Escape') {
                clearResult();
            }
        });

        // æ˜¾ç¤ºé”®ç›˜å¿«æ·é”®æç¤º
        console.log('%câŒ¨ï¸ é”®ç›˜å¿«æ·é”®', 'font-size: 16px; font-weight: bold; color: #667eea;');
        console.log('Ctrl/Cmd + K: èšç„¦å‘½ä»¤è¾“å…¥');
        console.log('Enter: æ‰§è¡Œå‘½ä»¤');
        console.log('Esc: æ¸…é™¤ç»“æœ');
    </script>
</body>
</html>

