# ğŸš€ AI Stack v2.1.0 ä¸‹ä¸€æ­¥å®æ–½æŒ‡å—

**ç‰ˆæœ¬**: v2.1.0  
**çŠ¶æ€**: âœ… å¼€å‘å®Œæˆï¼Œå‡†å¤‡å®æ–½  
**æ›´æ–°æ—¶é—´**: 2025-11-07

---

## ğŸ“‹ å¿«é€Ÿå¯¼èˆª

- [ç«‹å³å¯åšçš„äº‹](#ç«‹å³å¯åšçš„äº‹)
- [å¼€å‘ç¯å¢ƒéƒ¨ç½²](#å¼€å‘ç¯å¢ƒéƒ¨ç½²)
- [ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²](#ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²)
- [éªŒè¯å’Œæµ‹è¯•](#éªŒè¯å’Œæµ‹è¯•)
- [ç›‘æ§é…ç½®](#ç›‘æ§é…ç½®)
- [v2.2.0å‡†å¤‡](#v22å‡†å¤‡)

---

## ğŸ¯ ç«‹å³å¯åšçš„äº‹

### 1. æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£ ğŸ“–

æ‰€æœ‰é‡è¦æ–‡æ¡£éƒ½å·²å‡†å¤‡å¥½ï¼š

```bash
# ğŸ“Š é¡¹ç›®çŠ¶æ€
open PROJECT_STATUS.md
# æˆ–
cat PROJECT_STATUS.md

# ğŸ“š APIå®Œæ•´æ–‡æ¡£ï¼ˆ150+é¡µï¼‰
open docs/API_DOCUMENTATION_v2.1.md

# ğŸš€ éƒ¨ç½²è¿ç»´æŒ‡å—ï¼ˆ100+é¡µï¼‰
open docs/DEPLOYMENT_GUIDE_v2.1.md

# ğŸ“Š ç›‘æ§ç³»ç»Ÿæ–‡æ¡£
open monitoring/README.md

# ğŸ“‹ å¼€å‘è¿›åº¦æŠ¥å‘Š
open ğŸ“‹v2.1.0å¼€å‘è¿›åº¦æŠ¥å‘Š.md

# ğŸ‰ å®Œæˆæ€»ç»“
open ğŸ‰v2.1.0å¼€å‘å®Œæˆæ€»ç»“.md

# ğŸ—“ï¸ å¼€å‘è·¯çº¿å›¾
open ğŸ—“ï¸AI-Stackå¼€å‘è·¯çº¿å›¾v2.0.md
```

### 2. æµè§ˆé¡¹ç›®ç»“æ„ ğŸ—‚ï¸

```bash
# æŸ¥çœ‹æ•´ä½“ç»“æ„
tree -L 2 -I 'venv|__pycache__|node_modules|.git'

# æŸ¥çœ‹æµ‹è¯•ç›®å½•
ls -la tests/

# æŸ¥çœ‹ç›‘æ§é…ç½®
ls -la monitoring/

# æŸ¥çœ‹å®‰å…¨æ¨¡å—
ls -la common/security/

# æŸ¥çœ‹æ–‡æ¡£ç›®å½•
ls -la docs/
```

### 3. æ£€æŸ¥é…ç½®æ–‡ä»¶ âš™ï¸

```bash
# æŸ¥çœ‹pytesté…ç½®
cat pytest.ini

# æŸ¥çœ‹CI/CDé…ç½®
ls -la .github/workflows/

# æŸ¥çœ‹Dockeré…ç½®
cat docker-compose.yml

# æŸ¥çœ‹Prometheusé…ç½®
cat monitoring/prometheus/prometheus.yml
```

---

## ğŸ—ï¸ å¼€å‘ç¯å¢ƒéƒ¨ç½²

### å‰ç½®è¦æ±‚

ç¡®ä¿å·²å®‰è£…ï¼š
- Python 3.11+
- Docker 20.10+
- Docker Compose 2.0+

### å¿«é€Ÿå¯åŠ¨ï¼ˆ3æ­¥ï¼‰

#### æ­¥éª¤1: é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ç¯å¢ƒå˜é‡æ–‡ä»¶
vim .env
# æˆ–
nano .env

# å¿…éœ€é…ç½®é¡¹ï¼š
# OPENAI_API_KEY=your_openai_api_key
# OLLAMA_BASE_URL=http://localhost:11434
# SECRET_KEY=your_secret_key
# JWT_SECRET_KEY=your_jwt_secret
```

#### æ­¥éª¤2: å¯åŠ¨æœåŠ¡

**æ–¹å¼A: Dockeréƒ¨ç½²ï¼ˆæ¨èï¼‰**
```bash
# åˆ›å»ºDockerç½‘ç»œ
docker network create ai-stack-network

# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

**æ–¹å¼B: æœ¬åœ°å¼€å‘**
```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate  # macOS/Linux
# æˆ–
venv\Scripts\activate  # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨æœåŠ¡
./scripts/start_all_services.sh
```

#### æ­¥éª¤3: éªŒè¯æœåŠ¡

```bash
# æ£€æŸ¥æœåŠ¡å¥åº·
./scripts/health_check.sh

# æˆ–æ‰‹åŠ¨æ£€æŸ¥
curl http://localhost:8011/health  # RAGç³»ç»Ÿ
curl http://localhost:8013/health  # ERPç³»ç»Ÿ
curl http://localhost:8020/health  # OpenWebUI
```

### å¯åŠ¨ç›‘æ§ç³»ç»Ÿ

```bash
# è¿›å…¥ç›‘æ§ç›®å½•
cd monitoring

# å¯åŠ¨ç›‘æ§æœåŠ¡
docker-compose -f docker-compose.monitoring.yml up -d

# æ£€æŸ¥ç›‘æ§æœåŠ¡
docker-compose -f docker-compose.monitoring.yml ps

# è®¿é—®ç›‘æ§ç•Œé¢
echo "Prometheus: http://localhost:9090"
echo "Grafana: http://localhost:3000 (admin/admin123)"
echo "Alertmanager: http://localhost:9093"
```

---

## ğŸš€ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### éƒ¨ç½²å‰æ£€æŸ¥æ¸…å•

- [ ] å·²å®Œæˆå¼€å‘ç¯å¢ƒæµ‹è¯•
- [ ] å·²é…ç½®SSLè¯ä¹¦
- [ ] å·²é…ç½®ç”Ÿäº§æ•°æ®åº“
- [ ] å·²é…ç½®å¤‡ä»½ç­–ç•¥
- [ ] å·²é…ç½®å‘Šè­¦é€šçŸ¥
- [ ] å·²è¿›è¡Œæ€§èƒ½æµ‹è¯•
- [ ] å·²å‡†å¤‡å›æ»šæ–¹æ¡ˆ

### ç”Ÿäº§ç¯å¢ƒé…ç½®

#### 1. SSL/TLSé…ç½®

```bash
# ä½¿ç”¨Let's Encrypt
sudo certbot certonly --standalone -d api.aistack.com

# æˆ–ç”Ÿæˆè‡ªç­¾åè¯ä¹¦ï¼ˆæµ‹è¯•ï¼‰
openssl req -x509 -nodes -days 365 -newkey rsa:2048 \
  -keyout nginx/ssl/aistack.key \
  -out nginx/ssl/aistack.crt
```

#### 2. æ•°æ®åº“é…ç½®

```bash
# PostgreSQLé…ç½®
# ç¼–è¾‘ docker-compose.yml
vim docker-compose.yml

# æ·»åŠ PostgreSQLæœåŠ¡
postgres:
  image: postgres:15-alpine
  environment:
    POSTGRES_DB: aistack
    POSTGRES_USER: aistack
    POSTGRES_PASSWORD: ${DB_PASSWORD}
  volumes:
    - postgres_data:/var/lib/postgresql/data
```

#### 3. Redisç¼“å­˜é…ç½®

```bash
# æ·»åŠ RedisæœåŠ¡
redis:
  image: redis:7-alpine
  command: redis-server --appendonly yes --requirepass ${REDIS_PASSWORD}
  volumes:
    - redis_data:/data
```

#### 4. Nginxåå‘ä»£ç†

```bash
# é…ç½®Nginx
vim nginx/nginx.conf

# å¯åŠ¨Nginx
docker-compose up -d nginx
```

### Kuberneteséƒ¨ç½²ï¼ˆå¯é€‰ï¼‰

```bash
# åˆ›å»ºå‘½åç©ºé—´
kubectl create namespace ai-stack

# åº”ç”¨é…ç½®
kubectl apply -f infra/k8s/

# æ£€æŸ¥éƒ¨ç½²
kubectl get pods -n ai-stack
kubectl get svc -n ai-stack

# æŸ¥çœ‹æ—¥å¿—
kubectl logs -f deployment/rag-api -n ai-stack
```

---

## ğŸ§ª éªŒè¯å’Œæµ‹è¯•

### è¿è¡Œæµ‹è¯•å¥—ä»¶

#### 1. å•å…ƒæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest -v

# è¿è¡Œç‰¹å®šæ¨¡å—
pytest tests/erp/ -v
pytest tests/rag/ -v

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=. --cov-report=html
open htmlcov/index.html
```

#### 2. é›†æˆæµ‹è¯•

```bash
# RAGç³»ç»Ÿé›†æˆæµ‹è¯•
pytest tests/integration/test_rag_endpoints.py -v

# ERPç³»ç»Ÿé›†æˆæµ‹è¯•
pytest tests/integration/ -v
```

#### 3. æ€§èƒ½æµ‹è¯•

```bash
# è¿è¡Œæ€§èƒ½æµ‹è¯•è„šæœ¬
chmod +x scripts/run_performance_tests.sh
./scripts/run_performance_tests.sh

# æˆ–æ‰‹åŠ¨è¿è¡Œ
pytest tests/performance/test_load_testing.py -v -s
```

#### 4. å®‰å…¨æµ‹è¯•

```bash
# OAuth2æµ‹è¯•
pytest tests/security/test_oauth2.py -v

# åŠ å¯†æµ‹è¯•
pytest tests/security/test_encryption.py -v

# è¿è¡Œå®‰å…¨æ‰«æ
bandit -r . -f json -o bandit_report.json
safety check --json > safety_report.json
```

### APIæµ‹è¯•

```bash
# ä½¿ç”¨HTTPieæµ‹è¯•API
http GET http://localhost:8011/health
http POST http://localhost:8011/api/search/semantic query="æµ‹è¯•"

# ä½¿ç”¨curlæµ‹è¯•
curl -X GET http://localhost:8011/health
curl -X POST http://localhost:8011/api/search/semantic \
  -H "Content-Type: application/json" \
  -d '{"query": "æµ‹è¯•", "top_k": 5}'
```

---

## ğŸ“Š ç›‘æ§é…ç½®

### å¯åŠ¨ç›‘æ§æ ˆ

```bash
# å¯åŠ¨å®Œæ•´ç›‘æ§ç³»ç»Ÿ
cd monitoring
docker-compose -f docker-compose.monitoring.yml up -d

# éªŒè¯ç›‘æ§æœåŠ¡
docker-compose -f docker-compose.monitoring.yml ps
```

### è®¿é—®ç›‘æ§ç•Œé¢

```bash
# Prometheusï¼ˆæŒ‡æ ‡æŸ¥è¯¢ï¼‰
open http://localhost:9090

# Grafanaï¼ˆå¯è§†åŒ–ä»ªè¡¨æ¿ï¼‰
open http://localhost:3000
# é»˜è®¤è´¦å·: admin / admin123

# Alertmanagerï¼ˆå‘Šè­¦ç®¡ç†ï¼‰
open http://localhost:9093

# Node Exporterï¼ˆç³»ç»ŸæŒ‡æ ‡ï¼‰
open http://localhost:9100/metrics

# cAdvisorï¼ˆå®¹å™¨æŒ‡æ ‡ï¼‰
open http://localhost:8080
```

### é…ç½®Grafanaä»ªè¡¨æ¿

1. ç™»å½•Grafana (http://localhost:3000)
2. æ·»åŠ æ•°æ®æºï¼š
   - Configuration â†’ Data Sources â†’ Add data source
   - é€‰æ‹© Prometheus
   - URL: http://prometheus:9090
   - ç‚¹å‡» "Save & Test"

3. å¯¼å…¥ä»ªè¡¨æ¿ï¼š
   - Create â†’ Import
   - è¾“å…¥ä»ªè¡¨æ¿IDæˆ–ä¸Šä¼ JSONæ–‡ä»¶
   - æ¨èä»ªè¡¨æ¿ï¼š
     - 1860: Node Exporter Full
     - 193: Docker Monitoring
     - è‡ªå®šä¹‰: AI Stackç³»ç»Ÿç›‘æ§

### é…ç½®å‘Šè­¦é€šçŸ¥

ç¼–è¾‘ `monitoring/alertmanager/config.yml`:

```yaml
receivers:
  - name: 'email'
    email_configs:
      - to: 'your-email@example.com'
        from: 'alertmanager@example.com'
        smarthost: 'smtp.gmail.com:587'
        auth_username: 'your-email@example.com'
        auth_password: 'your-password'

  - name: 'wechat'
    wechat_configs:
      - corp_id: 'your-corp-id'
        api_secret: 'your-api-secret'
        to_party: '1'
        agent_id: 'your-agent-id'
```

ç„¶åé‡å¯Alertmanagerï¼š
```bash
docker-compose -f docker-compose.monitoring.yml restart alertmanager
```

---

## ğŸ“ æ—¥å¸¸è¿ç»´æ“ä½œ

### æœåŠ¡ç®¡ç†

```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡çŠ¶æ€
docker-compose ps

# é‡å¯ç‰¹å®šæœåŠ¡
docker-compose restart rag-api

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
docker-compose logs -f rag-api

# è¿›å…¥å®¹å™¨
docker exec -it ai-stack-rag /bin/bash

# æŸ¥çœ‹èµ„æºä½¿ç”¨
docker stats
```

### æ•°æ®å¤‡ä»½

```bash
# è¿è¡Œå¤‡ä»½è„šæœ¬
./scripts/backup.sh

# æ‰‹åŠ¨å¤‡ä»½
docker exec ai-stack-rag tar -czf /tmp/backup.tar.gz /app/data
docker cp ai-stack-rag:/tmp/backup.tar.gz ./backups/
```

### æ•°æ®æ¢å¤

```bash
# è¿è¡Œæ¢å¤è„šæœ¬
./scripts/restore.sh ./backups/backup.tar.gz

# æ‰‹åŠ¨æ¢å¤
docker cp ./backups/backup.tar.gz ai-stack-rag:/tmp/
docker exec ai-stack-rag tar -xzf /tmp/backup.tar.gz -C /app/
docker-compose restart rag-api
```

### æ—¥å¿—ç®¡ç†

```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
tail -f logs/*.log

# å¯¼å‡ºæ—¥å¿—
docker-compose logs --no-color > logs/$(date +%Y%m%d).log

# æ¸…ç†æ—§æ—¥å¿—
find logs/ -name "*.log" -mtime +30 -delete
```

---

## ğŸ¯ v2.2.0 å‡†å¤‡

### v2.2.0 è§„åˆ’æ¦‚è§ˆ

æ ¹æ®è·¯çº¿å›¾ï¼Œv2.2.0çš„ä¸»è¦ä»»åŠ¡ï¼š

**1. æ€§èƒ½ä¼˜åŒ–** (20å°æ—¶)
- æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
- Redisç¼“å­˜é›†æˆ
- APIå“åº”ä¼˜åŒ–
- å‰ç«¯æ€§èƒ½ä¼˜åŒ–

**2. å¼‚æ­¥ä»»åŠ¡ç³»ç»Ÿ** (15å°æ—¶)
- Celeryé›†æˆ
- ä»»åŠ¡é˜Ÿåˆ—é…ç½®
- å¼‚æ­¥ä»»åŠ¡å®ç°

**3. æœç´¢å¢å¼º** (10å°æ—¶)
- Elasticsearché›†æˆ
- å…¨æ–‡æœç´¢
- é«˜çº§æŸ¥è¯¢

**4. æ•°æ®åˆ†æå¢å¼º** (10å°æ—¶)
- è‡ªå®šä¹‰æŠ¥è¡¨
- æ•°æ®é€è§†è¡¨
- è¶‹åŠ¿é¢„æµ‹

**é¢„è®¡å‘å¸ƒ**: 2025-12-15  
**é¢„è®¡å·¥ä½œé‡**: 55å°æ—¶

### å‡†å¤‡å·¥ä½œ

```bash
# 1. å®‰è£…Redis
docker run -d --name redis -p 6379:6379 redis:7-alpine

# 2. å®‰è£…Elasticsearch
docker run -d --name elasticsearch \
  -p 9200:9200 -p 9300:9300 \
  -e "discovery.type=single-node" \
  elasticsearch:8.11.0

# 3. å®‰è£…Celeryä¾èµ–
pip install celery[redis] flower

# 4. åˆ›å»ºv2.2.0å¼€å‘åˆ†æ”¯
git checkout -b feature/v2.2.0
```

---

## ğŸ“š å‚è€ƒèµ„æ–™

### å†…éƒ¨æ–‡æ¡£
- [APIæ–‡æ¡£](docs/API_DOCUMENTATION_v2.1.md)
- [éƒ¨ç½²æŒ‡å—](docs/DEPLOYMENT_GUIDE_v2.1.md)
- [ç›‘æ§æ–‡æ¡£](monitoring/README.md)
- [å¼€å‘è·¯çº¿å›¾](ğŸ—“ï¸AI-Stackå¼€å‘è·¯çº¿å›¾v2.0.md)

### å¤–éƒ¨èµ„æº
- [FastAPIæ–‡æ¡£](https://fastapi.tiangolo.com/)
- [Dockeræ–‡æ¡£](https://docs.docker.com/)
- [Kubernetesæ–‡æ¡£](https://kubernetes.io/docs/)
- [Prometheusæ–‡æ¡£](https://prometheus.io/docs/)
- [Grafanaæ–‡æ¡£](https://grafana.com/docs/)

---

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q1: æœåŠ¡å¯åŠ¨å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

```bash
# 1. æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :8011

# 2. æŸ¥çœ‹æ—¥å¿—
docker logs ai-stack-rag

# 3. æ£€æŸ¥é…ç½®
cat .env
```

### Q2: å¦‚ä½•æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡ï¼Ÿ

```bash
pytest --cov=. --cov-report=html
open htmlcov/index.html
```

### Q3: ç›‘æ§æœåŠ¡è¿ä¸ä¸Šæ€ä¹ˆåŠï¼Ÿ

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose -f monitoring/docker-compose.monitoring.yml ps

# é‡å¯ç›‘æ§æœåŠ¡
docker-compose -f monitoring/docker-compose.monitoring.yml restart

# æŸ¥çœ‹æ—¥å¿—
docker-compose -f monitoring/docker-compose.monitoring.yml logs
```

### Q4: å¦‚ä½•æ›´æ–°ä¾èµ–ï¼Ÿ

```bash
# æ›´æ–°æ‰€æœ‰ä¾èµ–
pip install --upgrade -r requirements.txt

# é‡æ–°æ„å»ºDockeré•œåƒ
docker-compose build --no-cache
```

---

## ğŸ“ è·å–å¸®åŠ©

### æŠ€æœ¯æ”¯æŒæ¸ é“

1. **æŸ¥çœ‹æ–‡æ¡£**
   - å®Œæ•´APIæ–‡æ¡£
   - éƒ¨ç½²æŒ‡å—
   - æ•…éšœæ’æŸ¥æ‰‹å†Œ

2. **GitHub Issues**
   - https://github.com/your-org/ai-stack/issues

3. **æŠ€æœ¯æ”¯æŒé‚®ç®±**
   - support@aistack.com

4. **ç¤¾åŒº**
   - Discord: https://discord.gg/aistack
   - è®ºå›: https://forum.aistack.com

---

## âœ… å®æ–½æ£€æŸ¥æ¸…å•

### å¼€å‘ç¯å¢ƒéƒ¨ç½²
- [ ] å®‰è£…å‰ç½®ä¾èµ–
- [ ] é…ç½®ç¯å¢ƒå˜é‡
- [ ] å¯åŠ¨æ ¸å¿ƒæœåŠ¡
- [ ] å¯åŠ¨ç›‘æ§ç³»ç»Ÿ
- [ ] è¿è¡Œæµ‹è¯•éªŒè¯
- [ ] æŸ¥çœ‹ç›‘æ§ç•Œé¢

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
- [ ] é…ç½®SSLè¯ä¹¦
- [ ] é…ç½®ç”Ÿäº§æ•°æ®åº“
- [ ] é…ç½®Redisç¼“å­˜
- [ ] é…ç½®Nginxåå‘ä»£ç†
- [ ] é…ç½®å‘Šè­¦é€šçŸ¥
- [ ] æ‰§è¡Œæ€§èƒ½æµ‹è¯•
- [ ] å‡†å¤‡å›æ»šæ–¹æ¡ˆ
- [ ] æ•°æ®å¤‡ä»½ç­–ç•¥
- [ ] ç›‘æ§å‘Šè­¦æµ‹è¯•

### æ–‡æ¡£å’ŒåŸ¹è®­
- [ ] é˜…è¯»APIæ–‡æ¡£
- [ ] é˜…è¯»éƒ¨ç½²æŒ‡å—
- [ ] ç†Ÿæ‚‰ç›‘æ§ç³»ç»Ÿ
- [ ] äº†è§£æ•…éšœæ’æŸ¥
- [ ] å­¦ä¹ æœ€ä½³å®è·µ

---

<div align="center">

# ğŸ‰ å‡†å¤‡å°±ç»ªï¼

**AI Stack v2.1.0 å·²ç»å‡†å¤‡å¥½éƒ¨ç½²å’Œä½¿ç”¨**

é€‰æ‹©ä¸€ä¸ªéƒ¨ç½²æ–¹å¼å¼€å§‹å§ï¼ğŸš€

[Dockeréƒ¨ç½²](#å¼€å‘ç¯å¢ƒéƒ¨ç½²) | [æŸ¥çœ‹æ–‡æ¡£](#ç«‹å³å¯åšçš„äº‹) | [è¿è¡Œæµ‹è¯•](#éªŒè¯å’Œæµ‹è¯•)

---

**Made with â¤ï¸ by AI Stack Team**

*æœ€åæ›´æ–°: 2025-11-07*

</div>


















