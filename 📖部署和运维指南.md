# AI Stack éƒ¨ç½²å’Œè¿ç»´æŒ‡å—

> **ç‰ˆæœ¬**: v2.5  
> **æ›´æ–°æ—¶é—´**: 2025-01-06  
> **å®Œæˆåº¦**: 95%

---

## ç›®å½•

1. [ç³»ç»Ÿè¦æ±‚](#1-ç³»ç»Ÿè¦æ±‚)
2. [å¿«é€Ÿéƒ¨ç½²](#2-å¿«é€Ÿéƒ¨ç½²)
3. [è¯¦ç»†éƒ¨ç½²æ­¥éª¤](#3-è¯¦ç»†éƒ¨ç½²æ­¥éª¤)
4. [é…ç½®ç®¡ç†](#4-é…ç½®ç®¡ç†)
5. [è¿ç»´æŒ‡å—](#5-è¿ç»´æŒ‡å—)
6. [ç›‘æ§å‘Šè­¦](#6-ç›‘æ§å‘Šè­¦)
7. [æ•…éšœæ’æŸ¥](#7-æ•…éšœæ’æŸ¥)
8. [æ€§èƒ½ä¼˜åŒ–](#8-æ€§èƒ½ä¼˜åŒ–)
9. [å®‰å…¨åŠ å›º](#9-å®‰å…¨åŠ å›º)
10. [å¤‡ä»½æ¢å¤](#10-å¤‡ä»½æ¢å¤)

---

## 1. ç³»ç»Ÿè¦æ±‚

### 1.1 ç¡¬ä»¶è¦æ±‚

#### æœ€ä½é…ç½®
- **CPU**: 4æ ¸
- **å†…å­˜**: 8GB
- **ç¡¬ç›˜**: 50GB
- **ç½‘ç»œ**: 10Mbps

#### æ¨èé…ç½®
- **CPU**: 8æ ¸æˆ–ä»¥ä¸Š
- **å†…å­˜**: 16GBæˆ–ä»¥ä¸Š
- **ç¡¬ç›˜**: 200GB SSD
- **ç½‘ç»œ**: 100Mbpsæˆ–ä»¥ä¸Š

### 1.2 è½¯ä»¶è¦æ±‚

| è½¯ä»¶ | ç‰ˆæœ¬è¦æ±‚ | è¯´æ˜ |
|------|---------|------|
| æ“ä½œç³»ç»Ÿ | macOS 11+, Ubuntu 20.04+, CentOS 8+ | Linuxä¼˜å…ˆ |
| Python | 3.9+ | å»ºè®®3.11 |
| Node.js | 16+ | å‰ç«¯æ„å»º |
| Git | 2.30+ | ç‰ˆæœ¬ç®¡ç† |
| Docker | 20+ (å¯é€‰) | å®¹å™¨åŒ–éƒ¨ç½² |

### 1.3 Pythonä¾èµ–

```bash
# æ ¸å¿ƒä¾èµ–
fastapi>=0.104.0
uvicorn[standard]>=0.24.0
pydantic>=2.0.0
python-multipart

# æ•°æ®åº“
sqlalchemy>=2.0.0
chromadb>=0.4.0

# AI/ML
langchain>=0.1.0
openai>=1.0.0
sentence-transformers

# å·¥å…·åº“
psutil
httpx
python-jose[cryptography]
passlib[bcrypt]
```

---

## 2. å¿«é€Ÿéƒ¨ç½²

### 2.1 ä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†ä»£ç 
cd /Users/ywc
git clone <repository_url> ai-stack-super-enhanced
cd ai-stack-super-enhanced

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate

# 3. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 4. å¿«é€Ÿå¯åŠ¨
./scripts/quick_start.sh
```

### 2.2 Dockeréƒ¨ç½²ï¼ˆå¼€å‘ä¸­ï¼‰

```bash
# æ„å»ºé•œåƒ
docker-compose build

# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

---

## 3. è¯¦ç»†éƒ¨ç½²æ­¥éª¤

### 3.1 ç¯å¢ƒå‡†å¤‡

#### macOS
```bash
# å®‰è£…Homebrewï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# å®‰è£…Pythonå’ŒNode.js
brew install python@3.11 node

# éªŒè¯å®‰è£…
python3 --version
node --version
```

#### Ubuntu/Debian
```bash
# æ›´æ–°è½¯ä»¶æº
sudo apt update

# å®‰è£…Pythonå’Œä¾èµ–
sudo apt install -y python3.11 python3.11-venv python3-pip

# å®‰è£…Node.js
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt install -y nodejs
```

### 3.2 ä»£ç éƒ¨ç½²

```bash
# 1. ä¸‹è½½ä»£ç 
cd /opt  # æˆ–æ‚¨çš„éƒ¨ç½²ç›®å½•
git clone <repository_url> ai-stack

# 2. è®¾ç½®æƒé™
cd ai-stack
chmod +x scripts/*.sh scripts/*.py

# 3. åˆ›å»ºå¿…è¦ç›®å½•
mkdir -p logs backups data
```

### 3.3 é…ç½®æ–‡ä»¶

#### 3.3.1 ä¸»é…ç½®æ–‡ä»¶ `config.json`

```json
{
  "environment": "production",
  "services": {
    "chat_center": {
      "host": "0.0.0.0",
      "port": 8020
    },
    "rag": {
      "host": "0.0.0.0",
      "port": 8011
    },
    "erp": {
      "host": "0.0.0.0",
      "port": 8013
    }
  },
  "database": {
    "type": "sqlite",
    "path": "data/main.db"
  },
  "security": {
    "api_key_required": true,
    "jwt_secret": "your-secret-key-here"
  },
  "monitoring": {
    "enabled": true,
    "interval": 60
  }
}
```

#### 3.3.2 ç¯å¢ƒå˜é‡ `.env`

```bash
# AIé…ç½®
OPENAI_API_KEY=your_openai_key
OLLAMA_BASE_URL=http://localhost:11434

# æ•°æ®åº“
DATABASE_URL=sqlite:///./data/main.db

# å®‰å…¨
JWT_SECRET_KEY=your_jwt_secret_key
API_KEY_SALT=your_api_key_salt

# æ—¥å¿—
LOG_LEVEL=INFO
LOG_FILE=logs/ai-stack.log
```

### 3.4 å¯åŠ¨æœåŠ¡

#### æ–¹å¼1ï¼šä½¿ç”¨å¿«é€Ÿå¯åŠ¨è„šæœ¬
```bash
./scripts/quick_start.sh
```

#### æ–¹å¼2ï¼šæ‰‹åŠ¨å¯åŠ¨å„æœåŠ¡
```bash
# å¯åŠ¨AIäº¤äº’ä¸­å¿ƒ
cd ai-chat-center
nohup python3 -m uvicorn chat_server:app --host 0.0.0.0 --port 8020 &

# å¯åŠ¨RAGç³»ç»Ÿ
cd ../rag
nohup python3 -m uvicorn rag_server:app --host 0.0.0.0 --port 8011 &

# å¯åŠ¨å…¶ä»–æœåŠ¡...
```

---

## 4. é…ç½®ç®¡ç†

### 4.1 é…ç½®æ–‡ä»¶ä½ç½®

```
ai-stack/
â”œâ”€â”€ config.json          # ä¸»é…ç½®
â”œâ”€â”€ .env                 # ç¯å¢ƒå˜é‡
â”œâ”€â”€ ai-chat-center/
â”‚   â””â”€â”€ config.json      # èŠå¤©ä¸­å¿ƒé…ç½®
â”œâ”€â”€ rag/
â”‚   â””â”€â”€ config.json      # RAGé…ç½®
â””â”€â”€ ğŸ’¼ Intelligent ERP/
    â””â”€â”€ config.json      # ERPé…ç½®
```

### 4.2 é…ç½®çƒ­æ›´æ–°

```bash
# é‡æ–°åŠ è½½é…ç½®ï¼ˆä¸é‡å¯æœåŠ¡ï¼‰
curl -X POST http://localhost:8020/api/config/reload

# æŸ¥çœ‹å½“å‰é…ç½®
curl http://localhost:8020/api/config/current
```

---

## 5. è¿ç»´æŒ‡å—

### 5.1 æ—¥å¸¸è¿ç»´ä»»åŠ¡

#### æ¯æ—¥æ£€æŸ¥
```bash
# 1. å¥åº·æ£€æŸ¥
python3 scripts/health_check.py

# 2. æŸ¥çœ‹æ—¥å¿—
python3 scripts/log_viewer.py

# 3. æ£€æŸ¥ç£ç›˜ç©ºé—´
df -h
```

#### æ¯å‘¨ç»´æŠ¤
```bash
# 1. æ•°æ®å¤‡ä»½
python3 scripts/backup_restore.py
# é€‰æ‹©ï¼š1 - åˆ›å»ºå®Œæ•´å¤‡ä»½

# 2. æ¸…ç†æ—§æ—¥å¿—
python3 scripts/log_viewer.py
# é€‰æ‹©ï¼š6 - æ¸…ç†æ—§æ—¥å¿—

# 3. æ€§èƒ½æŠ¥å‘Š
python3 -c "from performance_monitor import performance_monitor; print(performance_monitor.get_report())"
```

### 5.2 æœåŠ¡ç®¡ç†

#### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡
ps aux | grep uvicorn

# æŸ¥çœ‹ç«¯å£å ç”¨
lsof -i :8020
```

#### é‡å¯æœåŠ¡
```bash
# é‡å¯å•ä¸ªæœåŠ¡
lsof -ti:8020 | xargs kill -9
cd ai-chat-center
nohup python3 -m uvicorn chat_server:app --host 0.0.0.0 --port 8020 &

# é‡å¯æ‰€æœ‰æœåŠ¡
./scripts/quick_start.sh
```

#### åœæ­¢æœåŠ¡
```bash
# åœæ­¢æ‰€æœ‰æœåŠ¡
./scripts/stop_all_services.sh

# æˆ–æ‰‹åŠ¨åœæ­¢
lsof -ti:8020,8011,8013,8014,8015,8016,8017,8018,8019 | xargs kill -9
```

---

## 6. ç›‘æ§å‘Šè­¦

### 6.1 æ€§èƒ½ç›‘æ§

```bash
# å®æ—¶ç›‘æ§
python3 -c "
from performance_monitor import performance_monitor
import asyncio
asyncio.run(performance_monitor.start_monitoring(interval=30))
"
```

### 6.2 å‘Šè­¦é…ç½®

ç¼–è¾‘ `monitoring/alert_config.json`:

```json
{
  "alerts": {
    "cpu": {
      "warning_threshold": 80,
      "critical_threshold": 90,
      "notification": ["email", "slack"]
    },
    "memory": {
      "warning_threshold": 85,
      "critical_threshold": 95
    },
    "disk": {
      "warning_threshold": 90,
      "critical_threshold": 95
    }
  },
  "notification": {
    "email": {
      "enabled": true,
      "recipients": ["admin@example.com"]
    },
    "slack": {
      "enabled": false,
      "webhook_url": ""
    }
  }
}
```

---

## 7. æ•…éšœæ’æŸ¥

### 7.1 å¸¸è§é—®é¢˜

#### é—®é¢˜1ï¼šæœåŠ¡æ— æ³•å¯åŠ¨

**ç—‡çŠ¶**ï¼šæ‰§è¡Œå¯åŠ¨è„šæœ¬åæœåŠ¡æœªè¿è¡Œ

**æ’æŸ¥æ­¥éª¤**ï¼š
```bash
# 1. æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨
lsof -i :8020

# 2. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -100 logs/chat_center.log

# 3. æ£€æŸ¥Pythonä¾èµ–
pip list | grep fastapi

# 4. æ‰‹åŠ¨å¯åŠ¨æŸ¥çœ‹é”™è¯¯
cd ai-chat-center
python3 -m uvicorn chat_server:app --host 0.0.0.0 --port 8020
```

#### é—®é¢˜2ï¼šAPIå“åº”æ…¢

**æ’æŸ¥æ­¥éª¤**ï¼š
```bash
# 1. æŸ¥çœ‹ç³»ç»Ÿèµ„æº
python3 scripts/health_check.py

# 2. æ£€æŸ¥æ•°æ®åº“æ€§èƒ½
# æŸ¥çœ‹æ•°æ®åº“å¤§å°
du -sh data/*.db

# 3. æŸ¥çœ‹ç½‘ç»œå»¶è¿Ÿ
ping localhost
```

#### é—®é¢˜3ï¼šæ•°æ®åº“é”å®š

**ç—‡çŠ¶**ï¼š`database is locked`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# 1. å…³é—­æ‰€æœ‰æœåŠ¡
./scripts/stop_all_services.sh

# 2. ç­‰å¾…3ç§’
sleep 3

# 3. é‡æ–°å¯åŠ¨
./scripts/quick_start.sh
```

### 7.2 æ—¥å¿—åˆ†æ

```bash
# æŸ¥æ‰¾é”™è¯¯
grep "ERROR" logs/*.log

# æŸ¥æ‰¾æœ€è¿‘1å°æ—¶çš„é”™è¯¯
find logs/ -name "*.log" -mmin -60 -exec grep "ERROR" {} \;

# ç»Ÿè®¡é”™è¯¯ç±»å‹
grep "ERROR" logs/*.log | awk '{print $NF}' | sort | uniq -c
```

---

## 8. æ€§èƒ½ä¼˜åŒ–

### 8.1 æ•°æ®åº“ä¼˜åŒ–

```python
# æ·»åŠ ç´¢å¼•
import sqlite3
conn = sqlite3.connect('data/main.db')
cursor = conn.cursor()
cursor.execute('CREATE INDEX idx_user_id ON conversations(user_id)')
conn.commit()
```

### 8.2 ç¼“å­˜é…ç½®

ç¼–è¾‘ `config.json`:

```json
{
  "cache": {
    "enabled": true,
    "type": "memory",
    "max_size": 1000,
    "ttl": 3600
  }
}
```

### 8.3 å¹¶å‘ä¼˜åŒ–

```bash
# å¢åŠ workeræ•°é‡
uvicorn chat_server:app --workers 4 --host 0.0.0.0 --port 8020
```

---

## 9. å®‰å…¨åŠ å›º

### 9.1 å¯ç”¨APIè®¤è¯

```python
# åœ¨config.jsonä¸­å¯ç”¨
{
  "security": {
    "api_key_required": true,
    "jwt_enabled": true
  }
}
```

### 9.2 é…ç½®é˜²ç«å¢™

```bash
# Ubuntu UFW
sudo ufw allow 8020/tcp
sudo ufw allow 8011/tcp
sudo ufw enable

# CentOS Firewalld
sudo firewall-cmd --permanent --add-port=8020/tcp
sudo firewall-cmd --reload
```

### 9.3 HTTPSé…ç½®ï¼ˆä½¿ç”¨Nginxï¼‰

```nginx
server {
    listen 443 ssl;
    server_name ai-stack.yourdomain.com;
    
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;
    
    location / {
        proxy_pass http://localhost:8020;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

---

## 10. å¤‡ä»½æ¢å¤

### 10.1 è‡ªåŠ¨å¤‡ä»½

åˆ›å»ºcronä»»åŠ¡ï¼š

```bash
# ç¼–è¾‘crontab
crontab -e

# æ·»åŠ æ¯å¤©å‡Œæ™¨2ç‚¹å¤‡ä»½
0 2 * * * cd /opt/ai-stack && python3 scripts/backup_restore.py --auto --type full
```

### 10.2 å¤‡ä»½ç­–ç•¥

- **å®Œæ•´å¤‡ä»½**ï¼šæ¯å‘¨æ—¥
- **å¢é‡å¤‡ä»½**ï¼šæ¯å¤©
- **ä¿ç•™ç­–ç•¥**ï¼šä¿ç•™æœ€è¿‘30å¤©

### 10.3 æ¢å¤æ•°æ®

```bash
# 1. åœæ­¢æœåŠ¡
./scripts/stop_all_services.sh

# 2. æ¢å¤å¤‡ä»½
python3 scripts/backup_restore.py
# é€‰æ‹©ï¼š4 - æ¢å¤å¤‡ä»½

# 3. é‡å¯æœåŠ¡
./scripts/quick_start.sh
```

---

## é™„å½•

### A. ç«¯å£åˆ—è¡¨

| æœåŠ¡ | ç«¯å£ | è¯´æ˜ |
|------|------|------|
| AIäº¤äº’ä¸­å¿ƒ | 8020 | ä¸»è¦äº¤äº’æ¥å£ |
| RAGç³»ç»Ÿ | 8011 | çŸ¥è¯†æ£€ç´¢ |
| ERP-API | 8013 | ä¼ä¸šç®¡ç† |
| è‚¡ç¥¨äº¤æ˜“ | 8014 | æŠ•èµ„åˆ†æ |
| è¶‹åŠ¿åˆ†æ | 8015 | å¸‚åœºåˆ†æ |
| å†…å®¹åˆ›ä½œ | 8016 | AIåˆ›ä½œ |
| ä»»åŠ¡ä»£ç† | 8017 | ä»»åŠ¡è°ƒåº¦ |
| èµ„æºç®¡ç† | 8018 | ç³»ç»Ÿç›‘æ§ |
| è‡ªæˆ‘å­¦ä¹  | 8019 | AIä¼˜åŒ– |

### B. ç›®å½•ç»“æ„

```
/opt/ai-stack/
â”œâ”€â”€ logs/              # æ—¥å¿—æ–‡ä»¶
â”œâ”€â”€ backups/           # å¤‡ä»½æ–‡ä»¶
â”œâ”€â”€ data/              # æ•°æ®æ–‡ä»¶
â”œâ”€â”€ scripts/           # è¿ç»´è„šæœ¬
â”œâ”€â”€ config.json        # ä¸»é…ç½®
â””â”€â”€ .env               # ç¯å¢ƒå˜é‡
```

### C. è”ç³»æ–¹å¼

- **æŠ€æœ¯æ”¯æŒ**: æŸ¥çœ‹å„æ¨¡å—README
- **æ–‡æ¡£**: ğŸ“šå®Œæ•´APIæ–‡æ¡£æ±‡æ€».md
- **GitHub**: (å¾…å¡«å†™)

---

**æ–‡æ¡£ç»´æŠ¤**: AI Stack Team  
**æœ€åæ›´æ–°**: 2025-01-06




