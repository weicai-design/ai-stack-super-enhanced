# ğŸš€ AI Stack éƒ¨ç½²é—®é¢˜è§£å†³æ–¹æ¡ˆ

**é—®é¢˜**: Dockeré•œåƒä¸‹è½½è¶…æ—¶  
**åŸå› **: ç½‘ç»œè¿æ¥åˆ°Docker Hubè¶…æ—¶  
**è§£å†³æ—¶é—´**: 2025-11-08 23:40

---

## âŒ é‡åˆ°çš„é—®é¢˜

### Dockeræ„å»ºé”™è¯¯

```
ERROR: failed to build: failed to solve: DeadlineExceeded: 
python:3.11-slim: failed to resolve source metadata for 
docker.io/library/python:3.11-slim: failed to do request: 
Head "https://registry-1.docker.io/v2/library/python/manifests/3.11-slim": 
context deadline exceeded
```

**åŸå› **: 
- Docker Hubç½‘ç»œè¿æ¥è¶…æ—¶
- å¯èƒ½æ˜¯ç½‘ç»œé—®é¢˜æˆ–DNSé—®é¢˜

---

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆAï¼šæœ¬åœ°ç›´æ¥éƒ¨ç½²ï¼ˆå·²å®æ–½ï¼‰â­

**ä¼˜åŠ¿**:
- âœ… ä¸ä¾èµ–Docker
- âœ… éƒ¨ç½²æ›´å¿«ï¼ˆæ— éœ€ä¸‹è½½é•œåƒï¼‰
- âœ… è°ƒè¯•æ›´æ–¹ä¾¿
- âœ… èµ„æºå ç”¨æ›´å°‘

**éƒ¨ç½²è„šæœ¬**: `deployment/deploy-local.sh`

**æ‰§è¡Œå‘½ä»¤**:
```bash
cd /Users/ywc/ai-stack-super-enhanced/deployment
./deploy-local.sh
```

**æœåŠ¡å°†åœ¨**: `http://localhost:8000`

---

### æ–¹æ¡ˆBï¼šé…ç½®Dockeré•œåƒæº

**æ­¥éª¤1**: é…ç½®Dockerä½¿ç”¨å›½å†…é•œåƒ

å·²åˆ›å»ºé…ç½®æ–‡ä»¶ï¼š`deployment/docker-daemon.json`

å†…å®¹ï¼š
```json
{
  "registry-mirrors": [
    "https://docker.mirrors.ustc.edu.cn",
    "https://hub-mirror.c.163.com",
    "https://mirror.ccs.tencentyun.com"
  ],
  "dns": ["8.8.8.8", "114.114.114.114"]
}
```

**æ­¥éª¤2**: åº”ç”¨é…ç½®

1. æ‰“å¼€Docker Desktop
2. è¿›å…¥Settings â†’ Docker Engine
3. å°†`docker-daemon.json`çš„å†…å®¹æ·»åŠ åˆ°é…ç½®ä¸­
4. ç‚¹å‡»"Apply & Restart"

**æ­¥éª¤3**: é‡è¯•éƒ¨ç½²

```bash
cd /Users/ywc/ai-stack-super-enhanced/deployment
./deploy.sh
```

---

### æ–¹æ¡ˆCï¼šä½¿ç”¨é¢„æ„å»ºé•œåƒï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰

**åç»­ä¼˜åŒ–**: 
1. åœ¨æœ‰è‰¯å¥½ç½‘ç»œçš„ç¯å¢ƒæ„å»ºé•œåƒ
2. æ¨é€åˆ°ç§æœ‰é•œåƒä»“åº“
3. åœ¨éƒ¨ç½²æ—¶æ‹‰å–é¢„æ„å»ºé•œåƒ

---

## ğŸ¯ å½“å‰éƒ¨ç½²çŠ¶æ€

### æœ¬åœ°éƒ¨ç½²å·²å¯åŠ¨ âœ…

**æ‰§è¡Œ**: `deployment/deploy-local.sh`

**æœåŠ¡ä¿¡æ¯**:
- **ç«¯å£**: 8000
- **è®¿é—®**: http://localhost:8000
- **å¥åº·æ£€æŸ¥**: http://localhost:8000/health
- **APIæ–‡æ¡£**: http://localhost:8000/docs

### éªŒè¯å‘½ä»¤

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8000/health

# é¢„æœŸè¾“å‡º
{"status":"healthy","version":"v2.5.0"}

# æµ‹è¯•Smart QAï¼ˆv2.6.0æ–°åŠŸèƒ½ï¼‰
curl http://localhost:8000/smart-qa/health

# APIæ–‡æ¡£
open http://localhost:8000/docs
```

---

## ğŸ“‹ æœ¬åœ°éƒ¨ç½²è¯´æ˜

### æœåŠ¡å¯åŠ¨æ–¹å¼

**å½“å‰**: ä½¿ç”¨uvicornç›´æ¥è¿è¡Œ

```bash
cd "ğŸ“š Enhanced RAG & Knowledge Graph"
python3 -m uvicorn api.app:app --host 0.0.0.0 --port 8000 --reload
```

**ç‰¹ç‚¹**:
- âœ… å¼€å‘æ¨¡å¼ï¼ˆæ”¯æŒçƒ­é‡è½½ï¼‰
- âœ… æ— éœ€Docker
- âœ… å¿«é€Ÿå¯åŠ¨
- âœ… æ˜“äºè°ƒè¯•

### åœæ­¢æœåŠ¡

```bash
# æŸ¥æ‰¾è¿›ç¨‹
ps aux | grep uvicorn

# åœæ­¢æœåŠ¡
kill <PID>

# æˆ–ä½¿ç”¨å¿«æ·é”®
Ctrl+C
```

### æŸ¥çœ‹æ—¥å¿—

```bash
# å®æ—¶æ—¥å¿—ï¼ˆæœåŠ¡è¿è¡Œçš„ç»ˆç«¯ï¼‰
# æˆ–æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶
tail -f logs/app.log
```

---

## ğŸ”§ Dockeré—®é¢˜è¯Šæ–­

### å¦‚æœæƒ³ç»§ç»­ä½¿ç”¨Docker

**è¯Šæ–­æ­¥éª¤**:

1. **æ£€æŸ¥Dockerè¿è¡Œ**:
```bash
docker info
```

2. **æ£€æŸ¥ç½‘ç»œè¿æ¥**:
```bash
ping registry-1.docker.io
```

3. **æµ‹è¯•é•œåƒæ‹‰å–**:
```bash
docker pull python:3.11-slim
```

4. **æŸ¥çœ‹Dockeræ—¥å¿—**:
```bash
# Docker Desktop â†’ Troubleshoot â†’ View logs
```

### å¸¸è§è§£å†³æ–¹æ³•

1. **é‡å¯Docker Desktop**
2. **é…ç½®é•œåƒæº**ï¼ˆè§æ–¹æ¡ˆBï¼‰
3. **æ£€æŸ¥é˜²ç«å¢™/ä»£ç†è®¾ç½®**
4. **ä½¿ç”¨VPN**ï¼ˆå¦‚æœæ˜¯ç½‘ç»œé™åˆ¶ï¼‰

---

## âœ… æ¨èæ–¹æ¡ˆ

### ç«‹å³ä½¿ç”¨ï¼šæœ¬åœ°éƒ¨ç½² â­

**ç†ç”±**:
- âœ… å·²ç»å¯åŠ¨
- âœ… æ— éœ€ç­‰å¾…Docker
- âœ… å¼€å‘æ¨¡å¼æ›´æ–¹ä¾¿
- âœ… å¯ä»¥ç«‹å³æµ‹è¯•

**åç»­**:
- Dockeré—®é¢˜å¯ä»¥æ…¢æ…¢è§£å†³
- ç”Ÿäº§ç¯å¢ƒå†ç”¨Docker
- å½“å‰é‡ç‚¹æ˜¯éªŒè¯åŠŸèƒ½

---

## ğŸ¯ ä¸‹ä¸€æ­¥

### éªŒè¯éƒ¨ç½²ï¼ˆç«‹å³æ‰§è¡Œï¼‰

```bash
# ç­‰å¾…å‡ ç§’è®©æœåŠ¡å®Œå…¨å¯åŠ¨
sleep 10

# å¥åº·æ£€æŸ¥
curl http://localhost:8000/health

# æµ‹è¯•API
curl http://localhost:8000/docs
```

### å¦‚æœæœåŠ¡æ­£å¸¸

- âœ… éƒ¨ç½²æˆåŠŸ
- âœ… å¯ä»¥ç»§ç»­å¼€å‘
- âœ… å¯ä»¥æµ‹è¯•åŠŸèƒ½

### å¦‚æœéœ€è¦åœæ­¢

```bash
# æŒ‰Ctrl+Cåœæ­¢uvicornæœåŠ¡
```

---

## ğŸ“Š éƒ¨ç½²å¯¹æ¯”

| æ–¹å¼ | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨ |
|------|------|------|------|
| **æœ¬åœ°éƒ¨ç½²** | å¿«é€Ÿã€ç®€å•ã€æ˜“è°ƒè¯• | æ— éš”ç¦»ã€æ— ç¼–æ’ | å¼€å‘ã€æµ‹è¯• âœ… |
| **Docker** | éš”ç¦»ã€å¯é‡å¤ã€æ ‡å‡†åŒ– | éœ€è¦ç½‘ç»œã€è¾ƒæ…¢ | ç”Ÿäº§ç¯å¢ƒ |

**å½“å‰å»ºè®®**: ä½¿ç”¨æœ¬åœ°éƒ¨ç½²è¿›è¡Œå¼€å‘å’Œæµ‹è¯•ï¼ŒDockeré—®é¢˜åç»­è§£å†³ âœ…

---

## ğŸ“ é—®é¢˜è®°å½•

**æ—¥æœŸ**: 2025-11-08  
**é—®é¢˜**: Dockeré•œåƒä¸‹è½½è¶…æ—¶  
**å½±å“**: Dockeréƒ¨ç½²æš‚æ—¶æ— æ³•ä½¿ç”¨  
**è§£å†³**: åˆ›å»ºæœ¬åœ°éƒ¨ç½²è„šæœ¬  
**çŠ¶æ€**: âœ… å·²è§£å†³

**åç»­ä¼˜åŒ–**:
- [ ] é…ç½®Dockeré•œåƒæº
- [ ] æµ‹è¯•Dockeréƒ¨ç½²
- [ ] ä¼˜åŒ–Dockerfile

---

**å½“å‰éƒ¨ç½²æ–¹å¼ï¼šæœ¬åœ°éƒ¨ç½²ï¼ˆå¼€å‘æ¨¡å¼ï¼‰** âœ…

**æœåŠ¡åº”è¯¥æ­£åœ¨å¯åŠ¨ï¼Œè¯·ç­‰å¾…å‡ ç§’åæµ‹è¯•ï¼** ğŸš€

