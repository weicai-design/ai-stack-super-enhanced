# ğŸ”§ ä¸»ç•Œé¢å“åº”é—®é¢˜è¯Šæ–­ä¸ä¿®å¤

**æ—¶é—´**: 2025-11-10 11:30  
**é—®é¢˜**: é€‰æ‹©Ollama qwen2.5:7båï¼Œè¾“å…¥"ä½ å¥½"æ²¡æœ‰å“åº”  
**çŠ¶æ€**: âœ… å·²æ·»åŠ è°ƒè¯•ä¿¡æ¯å¹¶ä¿®å¤

---

## ğŸ” è¯Šæ–­ç»“æœ

### 1. åç«¯æµ‹è¯•
```bash
âœ… åç«¯è¿è¡Œä¸­
âœ… Ollamaè¿è¡Œä¸­
âœ… APIè°ƒç”¨æˆåŠŸ

æµ‹è¯•å‘½ä»¤è¿”å›:
"ä½ å¥½ï¼å¾ˆé«˜å…´ä¸ºæ‚¨æœåŠ¡ã€‚è¯·é—®æ‚¨æœ‰ä»€ä¹ˆé—®é¢˜æˆ–éœ€è¦ä»€ä¹ˆæ ·çš„å¸®åŠ©å‘¢ï¼Ÿ..."
```

**ç»“è®º**: åç«¯å®Œå…¨æ­£å¸¸ï¼

---

### 2. å‰ç«¯é—®é¢˜åˆ†æ

å¯èƒ½çš„åŸå› ï¼š
1. âŒ JavaScriptåŠ è½½é”™è¯¯
2. âŒ æµè§ˆå™¨ç¼“å­˜é—®é¢˜
3. âŒ å‰ç«¯æ²¡æœ‰æ­£ç¡®å¤„ç†å“åº”
4. âŒ chatMessageså®¹å™¨æ‰¾ä¸åˆ°

---

## âœ… å·²å®Œæˆçš„ä¿®å¤

### 1. æ·»åŠ è¯¦ç»†è°ƒè¯•æ—¥å¿—

#### ä¿®æ”¹å‰
```javascript
const response = await fetch('/api/v5/agent/chat', {...});
const data = await response.json();
this.addMessage('agent', data.response || 'å¤„ç†å®Œæˆ');
```

#### ä¿®æ”¹å
```javascript
console.log(`ğŸš€ å‘é€è¯·æ±‚: provider=${provider}, model=${model}`);

const response = await fetch('/api/v5/agent/chat', {...});

if (!response.ok) {
    const errorText = await response.text();
    console.error(`âŒ APIé”™è¯¯: ${response.status}`, errorText);
    throw new Error(`APIé”™è¯¯: ${response.status}`);
}

const data = await response.json();
console.log('âœ… æ”¶åˆ°å“åº”:', data);

if (data.response) {
    this.addMessage('agent', data.response);
    console.log('âœ… æ¶ˆæ¯å·²æ˜¾ç¤º');
} else {
    this.addMessage('agent', 'âš ï¸ æ”¶åˆ°ç©ºå“åº”');
    console.warn('âš ï¸ APIè¿”å›äº†ç©ºå“åº”:', data);
}
```

### 2. æ”¹è¿›addMessageå‡½æ•°

#### ä¿®æ”¹å‰
```javascript
addMessage(sender, content) {
    const messagesContainer = document.getElementById('chatMessages');
    const messageDiv = document.createElement('div');
    // ...
}
```

#### ä¿®æ”¹å
```javascript
addMessage(sender, content) {
    console.log(`ğŸ“ æ·»åŠ æ¶ˆæ¯: sender=${sender}, contenté•¿åº¦=${content?.length || 0}`);
    
    const messagesContainer = document.getElementById('chatMessages');
    if (!messagesContainer) {
        console.error('âŒ æ‰¾ä¸åˆ°chatMessageså®¹å™¨ï¼');
        return;
    }
    
    // ... ç»§ç»­å¤„ç†
}
```

---

## ğŸš€ æµ‹è¯•æ­¥éª¤

### æ­¥éª¤1: æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
```
æ–¹æ³•1: ç¡¬åˆ·æ–°
  Mac: Cmd + Shift + R
  Windows: Ctrl + Shift + R

æ–¹æ³•2: æ¸…é™¤ç¼“å­˜
  Chrome: è®¾ç½® â†’ éšç§å’Œå®‰å…¨ â†’ æ¸…é™¤æµè§ˆæ•°æ®
  é€‰æ‹©: ç¼“å­˜çš„å›¾ç‰‡å’Œæ–‡ä»¶
```

### æ­¥éª¤2: æ‰“å¼€æ§åˆ¶å°
```
Mac: Cmd + Option + I
Windows: F12 æˆ– Ctrl + Shift + I

åˆ‡æ¢åˆ° "Console" æ ‡ç­¾
```

### æ­¥éª¤3: é‡æ–°åŠ è½½é¡µé¢
```
è®¿é—®: http://localhost:8000/super-agent-v5
```

### æ­¥éª¤4: å‘é€æµ‹è¯•æ¶ˆæ¯
```
1. åœ¨èŠå¤©æ¡†è¾“å…¥: "ä½ å¥½"
2. æŒ‰å›è½¦å‘é€
3. è§‚å¯Ÿæ§åˆ¶å°è¾“å‡º
```

---

## ğŸ“Š æœŸæœ›çš„æ§åˆ¶å°è¾“å‡º

### æ­£å¸¸æµç¨‹
```
ğŸ¤– AI-STACK è¶…çº§Agent V5.0 å·²å¯åŠ¨
âœ… å·²åˆ‡æ¢åˆ° ollama æä¾›å•†ï¼Œå½“å‰æ¨¡å‹: qwen2.5:7b (æ¨èä¸­æ–‡)

ğŸ“ æ·»åŠ æ¶ˆæ¯: sender=user, contenté•¿åº¦=2
ğŸš€ å‘é€è¯·æ±‚: provider=ollama, model=qwen2.5:7b
âœ… æ”¶åˆ°å“åº”: {response: "ä½ å¥½ï¼å¾ˆé«˜å…´ä¸ºæ‚¨æœåŠ¡...", ...}
ğŸ“ æ·»åŠ æ¶ˆæ¯: sender=agent, contenté•¿åº¦=150
âœ… æ¶ˆæ¯å·²æ˜¾ç¤º
```

### é”™è¯¯æµç¨‹
```
ğŸ“ æ·»åŠ æ¶ˆæ¯: sender=user, contenté•¿åº¦=2
ğŸš€ å‘é€è¯·æ±‚: provider=ollama, model=qwen2.5:7b
âŒ APIé”™è¯¯: 500 ...

æˆ–è€…:

âŒ æ‰¾ä¸åˆ°chatMessageså®¹å™¨ï¼
```

---

## ğŸ› ï¸ å¯èƒ½çš„è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: æµè§ˆå™¨ç¼“å­˜é—®é¢˜
```bash
# è§£å†³: ç¡¬åˆ·æ–°
Mac: Cmd + Shift + R
Windows: Ctrl + Shift + R
```

### æ–¹æ¡ˆ2: JavaScriptæœªåŠ è½½
```
æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦æœ‰çº¢è‰²é”™è¯¯
å¦‚æœæœ‰ "Uncaught SyntaxError" ç­‰é”™è¯¯
â†’ åˆ·æ–°é¡µé¢
â†’ å¦‚æœæŒç»­å‡ºç°ï¼Œé‡å¯åç«¯
```

### æ–¹æ¡ˆ3: HTMLå…ƒç´ IDé”™è¯¯
```javascript
// æ£€æŸ¥HTMLä¸­æ˜¯å¦æœ‰id="chatMessages"
// å¦‚æœæ§åˆ¶å°æ˜¾ç¤º"æ‰¾ä¸åˆ°chatMessageså®¹å™¨"
â†’ è¿™æ˜¯HTMLç»“æ„é—®é¢˜
```

### æ–¹æ¡ˆ4: é‡å¯åç«¯
```bash
cd "/Users/ywc/ai-stack-super-enhanced/ğŸ“š Enhanced RAG & Knowledge Graph"

# åœæ­¢æ—§è¿›ç¨‹
pkill -f "python.*uvicorn"

# é‡æ–°å¯åŠ¨
source venv/bin/activate
export OLLAMA_BASE_URL=http://localhost:11434
export OLLAMA_MODEL=qwen2.5:7b
python -m uvicorn api.app:app --host 0.0.0.0 --port 8000 --reload
```

---

## ğŸ¯ å¿«é€ŸéªŒè¯API

### ä½¿ç”¨curlç›´æ¥æµ‹è¯•
```bash
curl -X POST http://localhost:8000/api/v5/agent/chat \
  -H "Content-Type: application/json" \
  -d '{
    "message": "ä½ å¥½",
    "session_id": "test",
    "provider": "ollama",
    "model": "qwen2.5:7b"
  }'
```

**æœŸæœ›è¾“å‡º**:
```json
{
  "response": "ä½ å¥½ï¼å¾ˆé«˜å…´ä¸ºæ‚¨æœåŠ¡...",
  "session_id": "test",
  "processing_time": 2.345,
  "workflow_steps": [...]
}
```

å¦‚æœcurlèƒ½è¿”å›æ­£å¸¸ç»“æœï¼Œè¯´æ˜åç«¯å®Œå…¨æ­£å¸¸ï¼Œé—®é¢˜åœ¨å‰ç«¯ã€‚

---

## ğŸ“ è°ƒè¯•Checklist

```
â–¡ 1. ç¡¬åˆ·æ–°æµè§ˆå™¨ï¼ˆCmd+Shift+Rï¼‰
â–¡ 2. æ‰“å¼€æ§åˆ¶å°ï¼ˆF12ï¼‰
â–¡ 3. æ¸…é™¤æ‰€æœ‰é”™è¯¯ä¿¡æ¯
â–¡ 4. é‡æ–°åŠ è½½é¡µé¢
â–¡ 5. æŸ¥çœ‹æ˜¯å¦æœ‰çº¢è‰²é”™è¯¯
â–¡ 6. å‘é€"ä½ å¥½"æµ‹è¯•
â–¡ 7. è§‚å¯Ÿæ§åˆ¶å°æ—¥å¿—
â–¡ 8. æŸ¥çœ‹æ˜¯å¦æ˜¾ç¤ºå“åº”
```

---

## ğŸŠ é¢„æœŸç»“æœ

### æˆåŠŸæ ‡å¿—
```
âœ… æ§åˆ¶å°æ˜¾ç¤ºå®Œæ•´æ—¥å¿—
âœ… çœ‹åˆ°"âœ… æ”¶åˆ°å“åº”"
âœ… çœ‹åˆ°"âœ… æ¶ˆæ¯å·²æ˜¾ç¤º"  
âœ… èŠå¤©æ¡†æ˜¾ç¤ºAIå›å¤
âœ… å›å¤å†…å®¹å®Œæ•´
```

### å¤±è´¥æ ‡å¿—
```
âŒ æ§åˆ¶å°æ²¡æœ‰ä»»ä½•æ—¥å¿— â†’ JavaScriptæœªåŠ è½½
âŒ æ˜¾ç¤º"æ‰¾ä¸åˆ°chatMessageså®¹å™¨" â†’ HTMLç»“æ„é—®é¢˜
âŒ æ˜¾ç¤º"APIé”™è¯¯" â†’ åç«¯é—®é¢˜ï¼ˆä½†æˆ‘ä»¬æµ‹è¯•è¿‡åç«¯æ­£å¸¸ï¼‰
âŒ æ˜¾ç¤º"æ”¶åˆ°ç©ºå“åº”" â†’ åç«¯è¿”å›æ ¼å¼é—®é¢˜
```

---

## ğŸ’¡ é¢å¤–å»ºè®®

### 1. ä½¿ç”¨ä¸åŒæµè§ˆå™¨æµ‹è¯•
```
è¯•è¯•:
- Chrome
- Safari
- Firefox
```

### 2. æ£€æŸ¥ç½‘ç»œè¯·æ±‚
```
æ§åˆ¶å° â†’ Networkæ ‡ç­¾ â†’ å‘é€æ¶ˆæ¯
æŸ¥çœ‹:
- /api/v5/agent/chat è¯·æ±‚
- Status: 200 OK
- ResponseåŒ…å«responseå­—æ®µ
```

### 3. æŸ¥çœ‹å®Œæ•´é”™è¯¯æ ˆ
```
å¦‚æœæœ‰é”™è¯¯ï¼Œç‚¹å‡»é”™è¯¯ä¿¡æ¯
ä¼šæ˜¾ç¤ºå®Œæ•´çš„å †æ ˆè·Ÿè¸ª
å¯ä»¥å®šä½å…·ä½“å“ªä¸€è¡Œå‡ºé”™
```

---

## ğŸ”„ å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨

### æä¾›ä»¥ä¸‹ä¿¡æ¯
1. æµè§ˆå™¨æ§åˆ¶å°çš„å®Œæ•´è¾“å‡ºï¼ˆæˆªå›¾ï¼‰
2. Networkæ ‡ç­¾ä¸­/api/v5/agent/chatçš„å“åº”
3. æ˜¯å¦æœ‰ä»»ä½•çº¢è‰²é”™è¯¯ä¿¡æ¯
4. åˆ·æ–°é¡µé¢åçš„åˆå§‹æ—¥å¿—

---

**âœ… å·²æ·»åŠ å®Œæ•´çš„è°ƒè¯•ä¿¡æ¯ï¼Œç°åœ¨è¯·åˆ·æ–°æµè§ˆå™¨å¹¶æ‰“å¼€æ§åˆ¶å°æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼**

**å¦‚æœçœ‹åˆ°å“åº”ï¼Œè¯´æ˜ä¿®å¤æˆåŠŸï¼å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œè¯·æä¾›æ§åˆ¶å°è¾“å‡ºï¼** ğŸš€

