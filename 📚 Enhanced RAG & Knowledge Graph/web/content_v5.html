<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å†…å®¹åˆ›ä½œ V5.0 - AI-STACK</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --primary: #2563eb; --success: #10b981; --bg: #0f172a; --surface: #1e293b; --text: #f1f5f9; --border: #334155; }
        body { font-family: Inter, sans-serif; background: var(--bg); color: var(--text); }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .top-nav { background: var(--surface); padding: 1rem 2rem; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; }
        .nav-title { font-size: 1.5rem; font-weight: 600; }
        .btn { padding: 0.6rem 1.2rem; border-radius: 8px; border: none; cursor: pointer; background: var(--primary); color: white; }
        .editor-container { background: var(--surface); padding: 2rem; border-radius: 12px; margin-top: 1.5rem; border: 1px solid var(--border); }
        .toolbar { display: flex; gap: 0.5rem; margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid var(--border); }
        .editor { min-height: 400px; background: #1e293b; padding: 1.5rem; border-radius: 8px; border: 1px solid var(--border); }
        .sidebar { background: var(--surface); padding: 1.5rem; border-radius: 12px; border: 1px solid var(--border); margin-top: 1.5rem; }
        .content-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 1.5rem; }
        .material-item { background: #334155; padding: 1rem; border-radius: 8px; margin-bottom: 0.5rem; cursor: pointer; }
    </style>
</head>
<body>
    <div class="top-nav">
        <div class="nav-title">âœï¸ å†…å®¹åˆ›ä½œ V5.0</div>
        <button class="btn" onclick="window.history.back()">â† è¿”å›</button>
    </div>
    <div class="container">
        <div class="content-grid">
            <div>
                <div class="editor-container">
                    <div class="toolbar">
                        <button class="btn">ğŸ“ AIå†™ä½œ</button>
                        <button class="btn">ğŸ’¾ ä¿å­˜è‰ç¨¿</button>
                        <button class="btn">ğŸ‘ï¸ é¢„è§ˆ</button>
                        <button class="btn">ğŸš€ å‘å¸ƒ</button>
                    </div>
                    <div class="editor" contenteditable="true" placeholder="åœ¨è¿™é‡Œå¼€å§‹åˆ›ä½œ...æˆ–è®©AIå¸®ä½ å†™ä½œ">
                        ç‚¹å‡»"AIå†™ä½œ"æŒ‰é’®ï¼Œè®©AIåŠ©æ‰‹å¸®ä½ åˆ›ä½œå†…å®¹...
                    </div>
                </div>
            </div>
            <div>
                <div class="sidebar">
                    <h3>ğŸ“š ç´ æåº“</h3>
                    <div style="margin-top: 1rem;">
                        <div class="material-item">ğŸ–¼ï¸ å›¾ç‰‡ç´ æ (234ä¸ª)</div>
                        <div class="material-item">ğŸ¥ è§†é¢‘ç´ æ (45ä¸ª)</div>
                        <div class="material-item">ğŸ“Š æ•°æ®å›¾è¡¨ (67ä¸ª)</div>
                    </div>
                </div>
                <div class="sidebar" style="margin-top: 1rem;">
                    <h3>ğŸ“¢ å‘å¸ƒæ¸ é“</h3>
                    <div style="margin-top: 1rem;">
                        <label><input type="checkbox"> å¾®ä¿¡å…¬ä¼—å·</label><br>
                        <label><input type="checkbox"> å°çº¢ä¹¦</label><br>
                        <label><input type="checkbox"> æŠ–éŸ³</label><br>
                        <label><input type="checkbox"> çŸ¥ä¹</label>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        // ==================== åç«¯APIè¿æ¥ï¼ˆV5.6ï¼‰====================
        
        // AIå†™ä½œåŠŸèƒ½
        document.querySelectorAll('.btn').forEach(btn => {
            if (btn.textContent.includes('AIå†™ä½œ')) {
                btn.addEventListener('click', async () => {
                    try {
                        const editor = document.querySelector('.editor');
                        const prompt = editor.textContent.trim() || 'è¯·å†™ä¸€ç¯‡å…³äºAIæŠ€æœ¯å‘å±•çš„æ–‡ç« ';
                        
                        btn.textContent = 'â³ AIåˆ›ä½œä¸­...';
                        btn.disabled = true;
                        
                        const response = await fetch('/api/v5/content/real/create', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ 
                                prompt: prompt,
                                style: 'professional',
                                length: 'medium'
                            })
                        });
                        
                        if (response.ok) {
                            const data = await response.json();
                            editor.textContent = data.content || 'è¿™æ˜¯AIç”Ÿæˆçš„å†…å®¹ç¤ºä¾‹...';
                            alert('âœ… AIå†™ä½œå®Œæˆï¼');
                        } else {
                            editor.textContent = '# AIå†™ä½œç¤ºä¾‹\n\nè¿™æ˜¯ä¸€ç¯‡å…³äºAIæŠ€æœ¯çš„æ–‡ç« ...\n\nï¼ˆæ¼”ç¤ºæ¨¡å¼ï¼‰';
                            alert('âš ï¸  ä½¿ç”¨æ¼”ç¤ºå†…å®¹');
                        }
                        
                        btn.textContent = 'ğŸ“ AIå†™ä½œ';
                        btn.disabled = false;
                        
                    } catch (error) {
                        console.warn('âš ï¸  å†…å®¹åˆ›ä½œAPIæœªå°±ç»ª:', error);
                        document.querySelector('.editor').textContent = '# AIå†™ä½œç¤ºä¾‹\n\nè¿™æ˜¯ä¸€ç¯‡ç¤ºä¾‹æ–‡ç« ...';
                        btn.textContent = 'ğŸ“ AIå†™ä½œ';
                        btn.disabled = false;
                    }
                });
            }
            
            if (btn.textContent.includes('å‘å¸ƒ')) {
                btn.addEventListener('click', async () => {
                    const content = document.querySelector('.editor').textContent;
                    const channels = [];
                    document.querySelectorAll('input[type="checkbox"]:checked').forEach(cb => {
                        channels.push(cb.parentElement.textContent.trim());
                    });
                    
                    try {
                        const response = await fetch('/api/v5/content/real/publish', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ content, channels })
                        });
                        
                        if (response.ok) {
                            alert(`âœ… å†…å®¹å·²å‘å¸ƒåˆ° ${channels.length} ä¸ªå¹³å°ï¼`);
                        } else {
                            alert('âš ï¸  å‘å¸ƒåŠŸèƒ½å¼€å‘ä¸­...');
                        }
                    } catch (error) {
                        alert('âš ï¸  å‘å¸ƒåŠŸèƒ½å¼€å‘ä¸­...');
                    }
                });
            }
        });
        
        console.log('âœ… å†…å®¹åˆ›ä½œV5ç•Œé¢å·²åŠ è½½ï¼ˆV5.6åç«¯è¿æ¥ç‰ˆï¼‰');
    </script>
</body>
</html>
