<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ERPç»¼åˆç®¡ç† V5.0 - AI-STACK</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --primary: #2563eb; --success: #10b981; --warning: #f59e0b; --bg: #0f172a; --surface: #1e293b; --text: #f1f5f9; --border: #334155; }
        body { font-family: Inter, sans-serif; background: var(--bg); color: var(--text); }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .top-nav { background: var(--surface); padding: 1rem 2rem; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; }
        .nav-title { font-size: 1.5rem; font-weight: 600; }
        .btn { padding: 0.6rem 1.2rem; border-radius: 8px; border: none; cursor: pointer; background: var(--primary); color: white; }
        .module-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1.5rem; }
        .module-card { background: var(--surface); padding: 1.5rem; border-radius: 12px; border: 1px solid var(--border); cursor: pointer; transition: all 0.2s; text-align: center; }
        .module-card:hover { border-color: var(--primary); transform: translateY(-2px); }
        .module-icon { font-size: 2rem; margin-bottom: 0.5rem; }
        .module-name { font-weight: 600; }
        .module-status { font-size: 0.85rem; color: #94a3b8; margin-top: 0.25rem; }
        .chart-container { background: var(--surface); padding: 1.5rem; border-radius: 12px; border: 1px solid var(--border); margin-top: 1.5rem; }
        .chart-wrapper { height: 300px; }
        .radar-wrapper { height: 400px; }
    </style>
</head>
<body>
    <div class="top-nav">
        <div class="nav-title">ğŸ’¼ ERPç»¼åˆç®¡ç† V5.0</div>
        <button class="btn" onclick="window.history.back()">â† è¿”å›ä¸»ç•Œé¢</button>
    </div>
    <div class="container">
        <h2 style="margin-top: 1.5rem;">ğŸ”— 11ä¸ªä¸šåŠ¡ç¯èŠ‚</h2>
        <div class="module-grid">
            <div class="module-card" onclick="window.open('/erp-ui/customers', '_blank')">
                <div class="module-icon">ğŸ‘¥</div>
                <div class="module-name">å®¢æˆ·ç®¡ç†</div>
                <div class="module-status">æ­£å¸¸è¿è¡Œ</div>
            </div>
            <div class="module-card" onclick="window.open('/erp-ui/orders', '_blank')">
                <div class="module-icon">ğŸ“‹</div>
                <div class="module-name">è®¢å•ç®¡ç†</div>
                <div class="module-status">æ­£å¸¸è¿è¡Œ</div>
            </div>
            <div class="module-card" onclick="window.open('/erp-ui/projects', '_blank')">
                <div class="module-icon">ğŸ“Š</div>
                <div class="module-name">é¡¹ç›®ç®¡ç†</div>
                <div class="module-status">æ­£å¸¸è¿è¡Œ</div>
            </div>
            <div class="module-card" onclick="window.open('/erp-ui/planning', '_blank')">
                <div class="module-icon">ğŸ“…</div>
                <div class="module-name">è®¡åˆ’ç®¡ç†</div>
                <div class="module-status">æ­£å¸¸è¿è¡Œ</div>
            </div>
            <div class="module-card" onclick="window.open('/erp-ui/purchasing', '_blank')">
                <div class="module-icon">ğŸ›’</div>
                <div class="module-name">é‡‡è´­ç®¡ç†</div>
                <div class="module-status">æ­£å¸¸è¿è¡Œ</div>
            </div>
            <div class="module-card" onclick="window.open('/erp-ui/production', '_blank')">
                <div class="module-icon">ğŸ­</div>
                <div class="module-name">ç”Ÿäº§ç®¡ç†</div>
                <div class="module-status">æ­£å¸¸è¿è¡Œ</div>
            </div>
            <div class="module-card" onclick="window.open('/erp-ui/inbound', '_blank')">
                <div class="module-icon">ğŸ“¥</div>
                <div class="module-name">å…¥åº“ç®¡ç†</div>
                <div class="module-status">æ­£å¸¸è¿è¡Œ</div>
            </div>
            <div class="module-card" onclick="window.open('/erp-ui/quality', '_blank')">
                <div class="module-icon">âœ…</div>
                <div class="module-name">è´¨é‡ç®¡ç†</div>
                <div class="module-status">æ­£å¸¸è¿è¡Œ</div>
            </div>
            <div class="module-card" onclick="window.open('/erp-ui/outbound', '_blank')">
                <div class="module-icon">ğŸ“¤</div>
                <div class="module-name">å‡ºåº“ç®¡ç†</div>
                <div class="module-status">æ­£å¸¸è¿è¡Œ</div>
            </div>
            <div class="module-card" onclick="window.open('/erp-ui/shipping', '_blank')">
                <div class="module-icon">ğŸšš</div>
                <div class="module-name">å‘è¿ç®¡ç†</div>
                <div class="module-status">æ­£å¸¸è¿è¡Œ</div>
            </div>
            <div class="module-card" onclick="window.open('/erp-ui/aftersales', '_blank')">
                <div class="module-icon">ğŸ”§</div>
                <div class="module-name">å”®åæœåŠ¡</div>
                <div class="module-status">æ­£å¸¸è¿è¡Œ</div>
            </div>
            <div class="module-card" onclick="window.open('/erp-ui/settlement', '_blank')">
                <div class="module-icon">ğŸ’°</div>
                <div class="module-name">ç»“ç®—ç®¡ç†</div>
                <div class="module-status">æ­£å¸¸è¿è¡Œ</div>
            </div>
        </div>

        <h2 style="margin-top: 2rem;">ğŸ“Š 8ç»´åº¦åˆ†æï¼ˆAI-STACKç‹¬åˆ›ï¼‰</h2>
        <div class="chart-container">
            <h3>ğŸ¯ ERPå¥åº·åº¦é›·è¾¾å›¾</h3>
            <div class="radar-wrapper"><canvas id="radarChart"></canvas></div>
        </div>

        <div class="chart-container">
            <h3>ğŸ“ˆ ä¸šåŠ¡æµç¨‹æ‰§è¡Œæ•ˆç‡</h3>
            <div class="chart-wrapper"><canvas id="flowChart"></canvas></div>
        </div>
    </div>
    <script>
        // 8ç»´åº¦é›·è¾¾å›¾
        const radarCtx = document.getElementById('radarChart').getContext('2d');
        const radarChart = new Chart(radarCtx, {
            type: 'radar',
            data: {
                labels: ['è´¨é‡', 'æˆæœ¬', 'äº¤æœŸ', 'å®‰å…¨', 'åˆ©æ¶¦', 'æ•ˆç‡', 'ç®¡ç†', 'æŠ€æœ¯'],
                datasets: [{
                    label: 'å½“å‰å¾—åˆ†',
                    data: [85, 78, 92, 88, 75, 82, 79, 86],
                    fill: true,
                    backgroundColor: 'rgba(37, 99, 235, 0.2)',
                    borderColor: '#2563eb',
                    borderWidth: 2
                }, {
                    label: 'è¡Œä¸šå¹³å‡',
                    data: [75, 70, 80, 85, 70, 75, 72, 78],
                    fill: true,
                    backgroundColor: 'rgba(148, 163, 184, 0.1)',
                    borderColor: '#94a3b8',
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        beginAtZero: true,
                        max: 100,
                        ticks: { color: '#94a3b8', backdropColor: 'transparent' },
                        grid: { color: '#334155' },
                        pointLabels: { color: '#f1f5f9', font: { size: 14 } }
                    }
                },
                plugins: {
                    legend: { labels: { color: '#f1f5f9' } }
                }
            }
        });

        // æµç¨‹æ•ˆç‡å›¾
        const flowCtx = document.getElementById('flowChart').getContext('2d');
        new Chart(flowCtx, {
            type: 'bar',
            data: {
                labels: ['å®¢æˆ·', 'è®¢å•', 'é¡¹ç›®', 'è®¡åˆ’', 'é‡‡è´­', 'ç”Ÿäº§', 'å…¥åº“', 'è´¨æ£€', 'å‡ºåº“', 'å‘è¿', 'å”®å', 'ç»“ç®—'],
                datasets: [{
                    label: 'æ‰§è¡Œæ•ˆç‡ (%)',
                    data: [95, 92, 89, 87, 85, 90, 93, 88, 91, 86, 94, 90],
                    backgroundColor: '#2563eb'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { labels: { color: '#f1f5f9' } } },
                scales: {
                    y: { beginAtZero: true, max: 100, ticks: { color: '#94a3b8' }, grid: { color: '#334155' } },
                    x: { ticks: { color: '#94a3b8' }, grid: { color: '#334155' } }
                }
            }
        });
        
        // ==================== åç«¯APIè¿æ¥ï¼ˆV5.6ï¼‰====================
        
        async function loadERPData() {
            try {
                console.log('ğŸ“¡ åŠ è½½ERPç»¼åˆæ•°æ®...');
                
                // è·å–8ç»´åº¦åˆ†ææ•°æ®
                const response = await fetch('/api/v5/erp/real/8-dimension/all');
                if (response.ok) {
                    const data = await response.json();
                    console.log('âœ… ERPæ•°æ®åŠ è½½æˆåŠŸ', data);
                    
                    // æ›´æ–°é›·è¾¾å›¾æ•°æ®
                    if (data.dimensions) {
                        const dimensionData = [
                            data.dimensions.quality || 85,
                            data.dimensions.cost || 78,
                            data.dimensions.delivery || 92,
                            data.dimensions.safety || 88,
                            data.dimensions.profit || 75,
                            data.dimensions.efficiency || 82,
                            data.dimensions.management || 79,
                            data.dimensions.technology || 86
                        ];
                        
                        // æ›´æ–°å›¾è¡¨
                        radarChart.data.datasets[0].data = dimensionData;
                        radarChart.update();
                    }
                }
            } catch (error) {
                console.warn('âš ï¸  ERP APIæœªå°±ç»ªï¼Œä½¿ç”¨æ¼”ç¤ºæ•°æ®:', error.message);
            }
        }
        
        window.addEventListener('load', loadERPData);
        
        console.log('âœ… ERPç»¼åˆç®¡ç†V5ç•Œé¢å·²åŠ è½½ï¼ˆV5.6åç«¯è¿æ¥ç‰ˆï¼‰');
    </script>
</body>
</html>
