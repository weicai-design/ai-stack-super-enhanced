# ğŸ“– OpenWebUIæ·±åº¦é›†æˆ - å®Œæ•´å®‰è£…ä½¿ç”¨æŒ‡å—

**å½“å‰çŠ¶æ€**: âš ï¸ **Functionså·²å¼€å‘å®Œæˆï¼Œä½†å°šæœªå®‰è£…**  
**ä¸‹ä¸€æ­¥**: æ‰‹åŠ¨å®‰è£…Functionsåˆ°OpenWebUI  
**é¢„è®¡æ—¶é—´**: 10-15åˆ†é’Ÿ

---

## ğŸ¯ å½“å‰é›†æˆçŠ¶æ€

### âœ… å·²å®Œæˆ

1. âœ… OpenWebUIæºç è·å–
2. âœ… 7ä¸ªFunctionså¼€å‘å®Œæˆï¼ˆ2,491è¡Œä»£ç ï¼‰
3. âœ… é›†æˆæ–¹æ¡ˆæ–‡æ¡£
4. âœ… OpenWebUIå·²å¯åŠ¨å¹¶æ‰“å¼€

### âš ï¸ å¾…å®Œæˆï¼ˆéœ€è¦æ‰‹åŠ¨æ“ä½œï¼‰

1. âš ï¸ åœ¨OpenWebUIä¸­å®‰è£…Functions
2. âš ï¸ é…ç½®APIç«¯ç‚¹
3. âš ï¸ æµ‹è¯•é›†æˆåŠŸèƒ½

**é‡è¦**: å½“å‰OpenWebUIå’ŒAI Stack**è¿˜æœªé›†æˆ**ï¼Œéœ€è¦æŒ‰ä»¥ä¸‹æ­¥éª¤æ‰‹åŠ¨å®‰è£…Functionsï¼

---

## ğŸ“¦ å·²å¼€å‘çš„7ä¸ªFunctions

### 1. rag_integration.py (409è¡Œ) â­â­â­â­â­
**åŠŸèƒ½**: RAGçŸ¥è¯†åº“æœç´¢ã€æ–‡æ¡£æ‘„å…¥ã€çŸ¥è¯†å›¾è°±æŸ¥è¯¢
**å‘½ä»¤**:
- `/rag search <query>` - æœç´¢çŸ¥è¯†åº“
- `/rag ingest <file>` - æ‘„å…¥æ–‡æ¡£
- `/kg query <entity>` - æŸ¥è¯¢çŸ¥è¯†å›¾è°±
- `/kg visualize` - å¯è§†åŒ–

### 2. erp_query.py (450è¡Œ) â­â­â­â­â­
**åŠŸèƒ½**: ERPç³»ç»ŸæŸ¥è¯¢ï¼ˆè´¢åŠ¡ã€è®¢å•ã€ç”Ÿäº§ã€åº“å­˜ï¼‰
**å‘½ä»¤**:
- `/erp financial` - è´¢åŠ¡æ•°æ®
- `/erp orders` - è®¢å•æŸ¥è¯¢
- `/erp production` - ç”Ÿäº§çŠ¶æ€
- `/erp inventory` - åº“å­˜æŸ¥è¯¢
- `/erp dashboard` - ç»¼åˆçœ‹æ¿

### 3. stock_analysis.py (425è¡Œ) â­â­â­â­â­
**åŠŸèƒ½**: è‚¡ç¥¨ä»·æ ¼ã€ç­–ç•¥åˆ†æã€è‡ªåŠ¨äº¤æ˜“
**å‘½ä»¤**:
- `/stock price <code>` - ä»·æ ¼æŸ¥è¯¢
- `/stock analyze <code>` - ç­–ç•¥åˆ†æ
- `/stock sentiment` - å¸‚åœºæƒ…ç»ª
- `/stock portfolio` - æŒä»“æŸ¥çœ‹

### 4. content_creation.py (371è¡Œ) â­â­â­â­
**åŠŸèƒ½**: AIå†…å®¹åˆ›ä½œå’Œå‘å¸ƒ
**å‘½ä»¤**:
- `/content create <topic>` - AIåˆ›ä½œ
- `/content publish <platform>` - å‘å¸ƒå†…å®¹
- `/content analyze` - çˆ†æ¬¾åˆ†æ

### 5. terminal_exec.py (216è¡Œ) â­â­â­
**åŠŸèƒ½**: å®‰å…¨çš„ç»ˆç«¯å‘½ä»¤æ‰§è¡Œ
**å‘½ä»¤**:
- `/terminal <command>` - æ‰§è¡Œå‘½ä»¤
- å‘½ä»¤ç™½åå•ä¿æŠ¤

### 6. system_monitor.py (264è¡Œ) â­â­â­â­
**åŠŸèƒ½**: ç³»ç»ŸçŠ¶æ€å’Œæ€§èƒ½ç›‘æ§
**å‘½ä»¤**:
- `/system status` - ç³»ç»ŸçŠ¶æ€
- `/system health` - å¥åº·æ£€æŸ¥
- `/system performance` - æ€§èƒ½æ•°æ®

### 7. unified_aistack.py (356è¡Œ) â­â­â­â­â­
**åŠŸèƒ½**: ç»Ÿä¸€æ¥å£å’Œæ™ºèƒ½è·¯ç”±
**å‘½ä»¤**:
- `/aistack status` - æŸ¥çœ‹çŠ¶æ€
- `/aistack help` - å¸®åŠ©ä¿¡æ¯
- è‡ªåŠ¨æ™ºèƒ½è·¯ç”±

**æ€»è®¡**: 2,491è¡Œä»£ç ï¼Œ7ä¸ªå®Œæ•´Functions

---

## ğŸš€ è¯¦ç»†å®‰è£…æ­¥éª¤

### Step 1: ç¡®è®¤OpenWebUIå·²è¿è¡Œ

è®¿é—®: **http://localhost:3000** (åº”è¯¥å·²è‡ªåŠ¨æ‰“å¼€)

å¦‚æœæ²¡æœ‰æ‰“å¼€ï¼Œç‚¹å‡»é“¾æ¥æˆ–æ‰§è¡Œ:
```bash
open http://localhost:3000
```

### Step 2: æ³¨å†Œ/ç™»å½•è´¦å·

**é¦–æ¬¡è®¿é—®éœ€è¦æ³¨å†Œ**:
1. å¡«å†™ä¿¡æ¯:
   - **å§“å**: AI Stack Admin
   - **é‚®ç®±**: admin@aistack.local
   - **å¯†ç **: è‡ªè¡Œè®¾ç½®ï¼ˆè¯·è®°ä½ï¼‰
2. ç‚¹å‡» **Sign Up**
3. è‡ªåŠ¨ç™»å½•

**å·²æœ‰è´¦å·**: ç›´æ¥ç™»å½•

### Step 3: è¿›å…¥Functionsç®¡ç†é¡µé¢

**æ–¹æ³•1**: ç‚¹å‡»å¯¼èˆª
1. ç‚¹å‡»å·¦ä¸‹è§’ **ç”¨æˆ·å¤´åƒ**
2. é€‰æ‹© **Settings** (è®¾ç½®)
3. å·¦ä¾§èœå•ç‚¹å‡» **Functions**

**æ–¹æ³•2**: ç›´æ¥è®¿é—®
```
http://localhost:3000/admin/functions
```

### Step 4: å®‰è£…Functions (é€ä¸ªä¸Šä¼ )

å¯¹äºæ¯ä¸ªFunctionæ–‡ä»¶ï¼Œé‡å¤ä»¥ä¸‹æ­¥éª¤ï¼š

#### å®‰è£…RAG Integration

1. åœ¨Functionsé¡µé¢ï¼Œç‚¹å‡» **+** æŒ‰é’®
2. é€‰æ‹© **Create a new function** æˆ– **Import Function**
3. å¤åˆ¶Functionä»£ç ï¼š
   ```bash
   # åœ¨ç»ˆç«¯æ‰§è¡Œ
   cat /Users/ywc/ai-stack-super-enhanced/OpenWebUI-Integration/openwebui-functions/rag_integration.py | pbcopy
   ```
4. ç²˜è´´åˆ°OpenWebUIçš„ä»£ç ç¼–è¾‘å™¨
5. ç‚¹å‡» **Save**
6. æ‰¾åˆ°æ–°æ·»åŠ çš„ **RAG Knowledge Integration**
7. ç‚¹å‡» **âš™ï¸** (è®¾ç½®å›¾æ ‡)
8. é…ç½®Valves:
   ```
   rag_api_endpoint: http://host.docker.internal:8011
   search_top_k: 5
   enable_kg_query: true
   ```
9. ç‚¹å‡» **Save**
10. ç¡®ä¿Functionå¼€å…³æ˜¯**å¼€å¯**çŠ¶æ€ï¼ˆç»¿è‰²ï¼‰

#### é‡å¤å®‰è£…å…¶ä»–Functions

æŒ‰ç›¸åŒæ­¥éª¤å®‰è£…ï¼š

**ERP Query**:
```bash
cat /Users/ywc/ai-stack-super-enhanced/OpenWebUI-Integration/openwebui-functions/erp_query.py | pbcopy
```
é…ç½®:
```
erp_api_endpoint: http://host.docker.internal:8013
enable_write: false
```

**Stock Analysis**:
```bash
cat /Users/ywc/ai-stack-super-enhanced/OpenWebUI-Integration/openwebui-functions/stock_analysis.py | pbcopy
```
é…ç½®:
```
stock_api_endpoint: http://host.docker.internal:8014
enable_trading: false
max_trade_amount: 10000.0
```

**Content Creation**:
```bash
cat /Users/ywc/ai-stack-super-enhanced/OpenWebUI-Integration/openwebui-functions/content_creation.py | pbcopy
```
é…ç½®:
```
content_api_endpoint: http://host.docker.internal:8016
enable_auto_publish: false
```

**Terminal Executor**:
```bash
cat /Users/ywc/ai-stack-super-enhanced/OpenWebUI-Integration/openwebui-functions/terminal_exec.py | pbcopy
```
é…ç½®:
```
enable_terminal: false  # æµ‹è¯•åå†å¯ç”¨
working_directory: /Users/ywc/ai-stack-super-enhanced
```

**System Monitor**:
```bash
cat /Users/ywc/ai-stack-super-enhanced/OpenWebUI-Integration/openwebui-functions/system_monitor.py | pbcopy
```

**Unified AI Stack**:
```bash
cat /Users/ywc/ai-stack-super-enhanced/OpenWebUI-Integration/openwebui-functions/unified_aistack.py | pbcopy
```
é…ç½®:
```
auto_routing: true
```

---

## ğŸ§ª æµ‹è¯•é›†æˆåŠŸèƒ½

### æµ‹è¯•1: RAGæœç´¢

åœ¨OpenWebUIèŠå¤©æ¡†è¾“å…¥:
```
/rag search AIæŠ€æœ¯
```

**é¢„æœŸç»“æœ**:
```
ğŸ”„ æ­£åœ¨å¤„ç†RAGè¯·æ±‚...
âœ… RAGæœç´¢å®Œæˆ
ğŸ” RAGæœç´¢ç»“æœ
[æ˜¾ç¤ºçŸ¥è¯†åº“æœç´¢ç»“æœ]
```

### æµ‹è¯•2: ERPæŸ¥è¯¢

```
/erp financial
```

**é¢„æœŸç»“æœ**:
```
ğŸ”„ æ­£åœ¨æŸ¥è¯¢ERPç³»ç»Ÿ...
âœ… è´¢åŠ¡æ•°æ®æŸ¥è¯¢å®Œæˆ
ğŸ’° è´¢åŠ¡æ•°æ® (month)
æ”¶å…¥: Â¥XXX
æ”¯å‡º: Â¥XXX
åˆ©æ¶¦: Â¥XXX
```

### æµ‹è¯•3: è‚¡ç¥¨åˆ†æ

```
/stock price 600519
```

**é¢„æœŸç»“æœ**:
```
ğŸ”„ æ­£åœ¨å¤„ç†è‚¡ç¥¨è¯·æ±‚...
âœ… ä»·æ ¼æŸ¥è¯¢å®Œæˆ
ğŸ“ˆ è´µå·èŒ…å° (600519)
å½“å‰ä»·æ ¼: Â¥1,850.00
æ¶¨è·Œ: +2.5%
```

### æµ‹è¯•4: ç³»ç»ŸçŠ¶æ€

```
/aistack status
```

**é¢„æœŸç»“æœ**:
```
ğŸ¥ AI Stack ç³»ç»ŸçŠ¶æ€
âœ… RAG - è¿è¡Œä¸­ (3.8ms)
âœ… ERP - è¿è¡Œä¸­ (4.6ms)
âœ… Stock - è¿è¡Œä¸­ (3.9ms)
...
è¿è¡ŒçŠ¶æ€: 10/10
å¯ç”¨ç‡: 100%
```

### æµ‹è¯•5: è‡ªåŠ¨å¢å¼º

ç›´æ¥æé—®ï¼ˆæ— éœ€å‘½ä»¤ï¼‰:
```
ä»€ä¹ˆæ˜¯æ·±åº¦å­¦ä¹ ï¼Ÿ
```

**é¢„æœŸ**: RAG Integrationè‡ªåŠ¨æ£€ç´¢çŸ¥è¯†åº“å¹¶å¢å¼ºå›ç­”

```
ä»Šå¤©çš„è®¢å•æƒ…å†µ
```

**é¢„æœŸ**: ERP Queryè‡ªåŠ¨æŸ¥è¯¢è®¢å•æ•°æ®

---

## âš ï¸ é‡è¦é…ç½®è¯´æ˜

### Dockerç½‘ç»œé…ç½®

OpenWebUIåœ¨Dockerä¸­è¿è¡Œï¼Œéœ€è¦ä½¿ç”¨ `host.docker.internal` è®¿é—®å®¿ä¸»æœºæœåŠ¡:

```
âœ… æ­£ç¡®: http://host.docker.internal:8011
âŒ é”™è¯¯: http://localhost:8011
```

### å®‰å…¨é…ç½®

**ç»ˆç«¯æ‰§è¡Œ**:
```
enable_terminal: false  # é»˜è®¤å…³é—­ï¼Œæµ‹è¯•åå†å¯ç”¨
```

**è‡ªåŠ¨äº¤æ˜“**:
```
enable_trading: false  # é»˜è®¤å…³é—­ï¼Œâš ï¸ è°¨æ…å¼€å¯
```

**è‡ªåŠ¨å‘å¸ƒ**:
```
enable_auto_publish: false  # é»˜è®¤å…³é—­
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜1: Functionsæ— æ³•è°ƒç”¨API

**æ£€æŸ¥**: AI StackæœåŠ¡æ˜¯å¦è¿è¡Œ
```bash
python3 scripts/system_health_check.py
```

**è§£å†³**: å¯åŠ¨æœåŠ¡
```bash
./scripts/start_all_final.sh
```

### é—®é¢˜2: HTTPè¿æ¥å¤±è´¥

**æ£€æŸ¥**: APIç«¯ç‚¹é…ç½®
- Dockerç¯å¢ƒ: `host.docker.internal:8011`
- æœ¬åœ°ç¯å¢ƒ: `localhost:8011`

### é—®é¢˜3: Functionæœªç”Ÿæ•ˆ

**æ£€æŸ¥**:
1. Functionæ˜¯å¦å·²å¯ç”¨ï¼ˆå¼€å…³ä¸ºç»¿è‰²ï¼‰
2. Valvesé…ç½®æ˜¯å¦æ­£ç¡®
3. OpenWebUIæ—¥å¿—: `docker logs open-webui`

### é—®é¢˜4: æ‰¾ä¸åˆ°Functionsèœå•

**è§£å†³**:
1. ç¡®ä¿ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ï¼ˆé¦–ä¸ªæ³¨å†Œè´¦å·ï¼‰
2. ç›´æ¥è®¿é—®: http://localhost:3000/admin/functions

---

## ğŸ“Š é›†æˆæ•ˆæœå¯¹æ¯”

### ä¹‹å‰ï¼ˆæœªé›†æˆï¼‰

```
éœ€è¦åˆ†åˆ«è®¿é—®å¤šä¸ªç³»ç»Ÿ:
- ERP: http://localhost:8012
- RAG: http://localhost:8011
- è‚¡ç¥¨: http://localhost:8014
- ...

æ“ä½œç¹çï¼Œéœ€è¦è®°ä½å¤šä¸ªåœ°å€
```

### ç°åœ¨ï¼ˆé›†æˆåï¼‰

```
ç»Ÿä¸€é€šè¿‡OpenWebUIè®¿é—®:
http://localhost:3000

ä¸€ä¸ªèŠå¤©æ¡†ï¼Œæ‰€æœ‰åŠŸèƒ½:
- /rag search AI
- /erp financial
- /stock price 600519
- /system status

è‡ªåŠ¨æ™ºèƒ½å¢å¼ºå¯¹è¯
```

---

## ğŸ¨ ç”¨æˆ·ä½“éªŒæå‡

### 1. ç»Ÿä¸€å…¥å£
åªéœ€è®¿é—® http://localhost:3000

### 2. å¯¹è¯å¼äº¤äº’
ç”¨è‡ªç„¶è¯­è¨€æŸ¥è¯¢å’Œæ“ä½œ

### 3. å®æ—¶åé¦ˆ
```
ğŸ”„ æ­£åœ¨å¤„ç†...
âœ… å®Œæˆ
ğŸ“Š ç»“æœ
```

### 4. æ™ºèƒ½è·¯ç”±
æé—®"è´¢åŠ¡æ•°æ®" â†’ è‡ªåŠ¨è°ƒç”¨ERP  
æé—®"è‚¡ç¥¨ä»·æ ¼" â†’ è‡ªåŠ¨è°ƒç”¨è‚¡ç¥¨ç³»ç»Ÿ

---

## ğŸ’¡ ä½¿ç”¨åœºæ™¯ç¤ºä¾‹

### åœºæ™¯1: æŸ¥è¯¢è´¢åŠ¡å’Œè®¢å•

```
User: å¸®æˆ‘æŸ¥ä¸€ä¸‹æœ¬æœˆçš„è´¢åŠ¡æƒ…å†µå’Œè®¢å•æ•°é‡


